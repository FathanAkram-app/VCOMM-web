[CallContext] ğŸ”¥ INCOMING CALL STATE CHANGED: {callId: 'call_1757916131699_4_2', callType: 'audio', status: 'ringing', isIncoming: true, peerUserId: 4,Â â€¦}
CallContext.tsx:3787 [CallContext] ğŸ”¥ INCOMING CALL DETAILS: {callId: 'call_1757916131699_4_2', groupName: undefined, callType: 'audio', isGroupCall: undefined}
CallContext.tsx:2434 [CallContext] acceptCall function called
CallContext.tsx:2435 [CallContext] incomingCall: {callId: 'call_1757916131699_4_2', callType: 'audio', status: 'ringing', isIncoming: true, peerUserId: 4,Â â€¦}
CallContext.tsx:2436 [CallContext] ws connected: true
CallContext.tsx:2437 [CallContext] user: {id: 2, callsign: 'eko', nrp: '12345', fullName: 'eko a', rank: 'SPC',Â â€¦}
CallContext.tsx:2457 [CallContext] Accepting call
CallContext.tsx:2460 [CallContext] ğŸ”‡ FORCE STOPPING ALL RINGTONES - Call accepted
CallContext.tsx:285 [CallContext] ğŸ”‡ STOPPING ALL RINGTONES - comprehensive cleanup
CallContext.tsx:290 [CallContext] Stopping HTML5 ringtone audio
CallContext.tsx:299 [CallContext] âœ… HTML5 ringtone stopped and cleared
CallContext.tsx:308 [CallContext] Force stopping current global ringtone
CallContext.tsx:316 [CallContext] âœ… Global ringtone reference stopped
CallContext.tsx:340 [CallContext] âœ… Stopped 0 audio elements
CallContext.tsx:384 [CallContext] âœ… RINGTONE CLEANUP COMPLETED
CallContext.tsx:2486 [CallContext] Requesting media permissions for mobile (accept call)...
CallContext.tsx:3797 [CallContext] ğŸ”¥ PROVIDER VALUE UPDATE: {incomingCall: {â€¦}, activeCall: null, hasIncomingCall: true, incomingCallId: 'call_1757916131699_4_2'}
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: {â€¦}, activeCall: null, hasIncomingCall: true}
IncomingCallModal.tsx:6 [IncomingCallModal] ğŸ”¥ COMPONENT RENDERED - START
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: {â€¦}, activeCall: null, hasIncomingCall: true}
IncomingCallModal.tsx:11 [IncomingCallModal] ğŸ”¥ After useCall hook - incomingCall: {callId: 'call_1757916131699_4_2', callType: 'audio', status: 'ringing', isIncoming: true, peerUserId: 4,Â â€¦}
IncomingCallModal.tsx:12 [IncomingCallModal] ğŸ”¥ incomingCall type check: object
IncomingCallModal.tsx:13 [IncomingCallModal] ğŸ”¥ incomingCall falsy check: false
IncomingCallModal.tsx:20 [IncomingCallModal] âœ… SHOWING MODAL for call: call_1757916131699_4_2
IncomingCallModal.tsx:21 [IncomingCallModal] Modal details: {isGroupCall: undefined, groupName: undefined, callType: 'audio', fromUser: 'dino'}
CallContext.tsx:2488 [CallContext] Got local media stream for incoming call
CallContext.tsx:2501 [CallContext] Added local stream to existing peerConnection
CallContext.tsx:2540 [CallContext] ğŸ¯ Call accepted - enabling audio and activating remote stream
CallContext.tsx:3797 [CallContext] ğŸ”¥ PROVIDER VALUE UPDATE: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false, incomingCallId: undefined}
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
IncomingCallModal.tsx:6 [IncomingCallModal] ğŸ”¥ COMPONENT RENDERED - START
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
IncomingCallModal.tsx:11 [IncomingCallModal] ğŸ”¥ After useCall hook - incomingCall: null
IncomingCallModal.tsx:12 [IncomingCallModal] ğŸ”¥ incomingCall type check: object
IncomingCallModal.tsx:13 [IncomingCallModal] ğŸ”¥ incomingCall falsy check: true
IncomingCallModal.tsx:16 [IncomingCallModal] No incoming call, returning null
CallContext.tsx:3785 [CallContext] ğŸ”¥ INCOMING CALL STATE CHANGED: null
CallContext.tsx:3797 [CallContext] ğŸ”¥ PROVIDER VALUE UPDATE: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false, incomingCallId: undefined}
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
AudioCall.tsx:268 [AudioCall] Component rendering with activeCall: {callId: 'call_1757916131699_4_2', callType: 'audio', status: 'connected', isIncoming: true, peerUserId: 4,Â â€¦}
AudioCall.tsx:269 [AudioCall] remoteAudioStream: null
ChatList.tsx:149 ğŸ“‹ CHATLIST: Removing WebSocket event listeners
AudioCall.tsx:295 [AudioCall] Mobile device detected: false
AudioCall.tsx:303 [AudioCall] Earphone connected: false Current output: speaker
AudioCall.tsx:320 [AudioCall] Remote stream effect triggered, remoteAudioStream: null
AudioCall.tsx:323 [AudioCall] âŒ No remote audio stream available, waiting for stream...
AudioCall.tsx:777 [AudioCall] Setting up call duration timer
CallContext.tsx:2606 [CallContext] ğŸ“¤ Sending WebRTC ready signal to caller: 4
CallContext.tsx:2614 [CallContext] âœ… WebRTC ready signal sent successfully
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
AudioCall.tsx:268 [AudioCall] Component rendering with activeCall: {callId: 'call_1757916131699_4_2', callType: 'audio', status: 'connected', isIncoming: true, peerUserId: 4,Â â€¦}
AudioCall.tsx:269 [AudioCall] remoteAudioStream: null
CallContext.tsx:717 [CallContext] Received message: {type: 'webrtc_offer', callId: 'call_1757916131699_4_2', offer: {â€¦}}
CallContext.tsx:832 [CallContext] ğŸ¯ Processing webrtc_offer message: {type: 'webrtc_offer', callId: 'call_1757916131699_4_2', offer: {â€¦}}
CallContext.tsx:2053 [CallContext] Received WebRTC offer for callId: call_1757916131699_4_2
CallContext.tsx:2060 [CallContext] Current activeCall: call_1757916131699_4_2
CallContext.tsx:2061 [CallContext] Current incomingCall: undefined
CallContext.tsx:2062 [CallContext] Looking for callId: call_1757916131699_4_2
CallContext.tsx:2080 [CallContext] Processing WebRTC offer...
CallContext.tsx:2505 [CallContext] ğŸ“¡ RECEIVER: Received remote stream
CallContext.tsx:2507 [CallContext] ğŸ“¡ RECEIVER: Remote stream details: {id: 'b3a46962-b54f-4640-88ca-2ebf5efc492f', active: true, audioTracks: 1, videoTracks: 0}
CallContext.tsx:2515 [CallContext] ğŸ“¡ RECEIVER: Storing remote stream globally
CallContext.tsx:2519 [CallContext] Remote audio received - stopping waiting tone
CallContext.tsx:462 [CallContext] ğŸ”‡ AGGRESSIVE AUDIO CLEANUP - STOPPING ALL AUDIO
CallContext.tsx:496 [CallContext] ğŸ’¥ NUCLEAR AUDIO CLEANUP - Closing ALL AudioContext instances
CallContext.tsx:512 [CallContext] âœ… Closed AudioContext
CallContext.tsx:542 [CallContext] ğŸ’¥ NUCLEAR INTERVAL CLEANUP - Clearing ALL intervals
CallContext.tsx:555 [CallContext] âœ… Nuclear interval cleanup completed
CallContext.tsx:560 [CallContext] âœ… AGGRESSIVE AUDIO CLEANUP COMPLETED
CallContext.tsx:2082 [CallContext] âœ… Remote description set successfully
CallContext.tsx:2087 [CallContext] Processing 6 pending ICE candidates for callId: call_1757916131699_4_2
CallContext.tsx:3797 [CallContext] ğŸ”¥ PROVIDER VALUE UPDATE: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false, incomingCallId: undefined}
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
AudioCall.tsx:268 [AudioCall] Component rendering with activeCall: {callId: 'call_1757916131699_4_2', callType: 'audio', status: 'connected', isIncoming: true, peerUserId: 4,Â â€¦}
AudioCall.tsx:269 [AudioCall] remoteAudioStream: MediaStreamÂ {id: 'b3a46962-b54f-4640-88ca-2ebf5efc492f', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
AudioCall.tsx:320 [AudioCall] Remote stream effect triggered, remoteAudioStream: MediaStreamÂ {id: 'b3a46962-b54f-4640-88ca-2ebf5efc492f', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
AudioCall.tsx:327 [AudioCall] Setting up remote audio stream...
AudioCall.tsx:331 [AudioCall] âœ… Found remote audio element, setting stream
AudioCall.tsx:415 [AudioCall] ğŸ§ Audio diagnostics enabled
AudioCall.tsx:424 [AudioCall] ğŸŒ Browser environment: {userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebâ€¦KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36', platform: 'Win32', isSecureContext: true, protocol: 'https:', hostname: 'd6b9d90f-fa84-48b1-86ca-93bf47f4824f-00-1eu5s7yk2ewfr.picard.replit.dev'}
AudioCall.tsx:432 [AudioCall] ğŸ”Š Attempt 1 - Audio element state: {paused: true, muted: false, volume: 1, readyState: 0, networkState: 3,Â â€¦}
AudioCall.tsx:447 [AudioCall] ğŸ¤ Remote stream info: {tracksCount: 1, streamActive: true, streamId: 'b3a46962-b54f-4640-88ca-2ebf5efc492f'}
AudioCall.tsx:453 [AudioCall] Track 0: {enabled: true, muted: false, readyState: 'live', kind: 'audio', id: '9ed500b0-a4c8-47a5-ba1c-2d61d4580723',Â â€¦}
AudioCall.tsx:465 [AudioCall] ğŸ® Checking autoplay policy...
AudioCall.tsx:9 [AudioCall] ğŸ”“ Force unlocking audio...
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
AudioCall.tsx:268 [AudioCall] Component rendering with activeCall: {callId: 'call_1757916131699_4_2', callType: 'audio', status: 'connected', isIncoming: true, peerUserId: 4,Â â€¦}
AudioCall.tsx:269 [AudioCall] remoteAudioStream: MediaStreamÂ {id: 'b3a46962-b54f-4640-88ca-2ebf5efc492f', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
CallContext.tsx:2091 [CallContext] âœ… Added pending ICE candidate
AudioCall.tsx:399 [AudioCall] â³ Audio waiting for data
CallContext.tsx:2091 [CallContext] âœ… Added pending ICE candidate
AudioCall.tsx:395 [AudioCall] ğŸ”„ Audio load started
AudioCall.tsx:397 [AudioCall] ğŸ“‹ Audio metadata loaded
AudioCall.tsx:396 [AudioCall] ğŸ“Š Audio data loaded
AudioCall.tsx:369 [AudioCall] ğŸ”Š Audio can play - ready state: 4
AudioCall.tsx:374 [AudioCall] ğŸµ Audio is playing - currentTime: 0
AudioCall.tsx:477 [AudioCall] âœ… Remote audio playing successfully (attempt 1)
AudioCall.tsx:120 [AudioCall] ğŸ¤ Setting up remote track monitoring: {enabled: true, muted: false, readyState: 'live'}
CallContext.tsx:2091 [CallContext] âœ… Added pending ICE candidate
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
AudioCall.tsx:268 [AudioCall] Component rendering with activeCall: {callId: 'call_1757916131699_4_2', callType: 'audio', status: 'connected', isIncoming: true, peerUserId: 4,Â â€¦}
AudioCall.tsx:269 [AudioCall] remoteAudioStream: MediaStreamÂ {id: 'b3a46962-b54f-4640-88ca-2ebf5efc492f', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
3CallContext.tsx:2091 [CallContext] âœ… Added pending ICE candidate
CallContext.tsx:2102 [CallContext] âœ… Local description (answer) set successfully
CallContext.tsx:2113 [CallContext] âš ï¸ WebSocket not ready for answer, using HTTP API fallback
CallContext.tsx:2534 [CallContext] âŒ RECEIVER: Remote audio element not found
AudioCall.tsx:398 [AudioCall] ğŸ“ˆ Audio loading progress
CallContext.tsx:2130 [CallContext] âœ… Sent WebRTC answer via HTTP API fallback
AudioCall.tsx:529 [AudioCall] ğŸ“Š Audio status after play: {paused: false, currentTime: 0, volume: 1}
AudioCall.tsx:537 [AudioCall] âš ï¸ Audio element shows playing but currentTime is 0 - trying audio fix
AudioCall.tsx:9 [AudioCall] ğŸ”“ Force unlocking audio...
AudioCall.tsx:40 [AudioCall] ğŸ” Checking audio output...
AudioCall.tsx:60 [AudioCall] ğŸ“Š Current audio state: {paused: false, muted: false, volume: 1, currentTime: 0, duration: Infinity,Â â€¦}
AudioCall.tsx:548 [AudioCall] ğŸ”§ Audio silent, testing different output devices...
AudioCall.tsx:46 [AudioCall] ğŸ”Š Available audio outputs: 3
AudioCall.tsx:48 [AudioCall] Output 0: {deviceId: 'default', label: 'Default - Speakers (Realtek(R) Audio)', groupId: 'f50c127aa2bf886d5f73c64188173f2fea73402211e81400e956386fd69c7ce3'}
AudioCall.tsx:48 [AudioCall] Output 1: {deviceId: 'communications', label: 'Communications - Speakers (Realtek(R) Audio)', groupId: 'f50c127aa2bf886d5f73c64188173f2fea73402211e81400e956386fd69c7ce3'}
AudioCall.tsx:48 [AudioCall] Output 2: {deviceId: '4c02ff55240e6c65f0fdabd06fededb5359782b182bc18a2ca0e777fd063b654', label: 'Speakers (Realtek(R) Audio)', groupId: 'f50c127aa2bf886d5f73c64188173f2fea73402211e81400e956386fd69c7ce3'}
AudioCall.tsx:558 [AudioCall] âœ… Testing audio output: Default - Speakers (Realtek(R) Audio)
AudioCall.tsx:84 [AudioCall] ğŸ“Š WebRTC audio stats: {bytesReceived: 0, audioLevel: 0, jitter: 0, packetsLost: 0, packetsReceived: 0}
AudioCall.tsx:94 [AudioCall] âš ï¸ No audio data received from remote peer!
AudioCall.tsx:558 [AudioCall] âœ… Testing audio output: Communications - Speakers (Realtek(R) Audio)
AudioCall.tsx:558 [AudioCall] âœ… Testing audio output: Speakers (Realtek(R) Audio)
AudioCall.tsx:84 [AudioCall] ğŸ“Š WebRTC audio stats: {bytesReceived: 0, audioLevel: 0, jitter: 0, packetsLost: 0, packetsReceived: 0}
AudioCall.tsx:94 [AudioCall] âš ï¸ No audio data received from remote peer!
AudioCall.tsx:576 [AudioCall] ğŸ˜ Tried all audio devices, none worked
AudioCall.tsx:145 [AudioCall] ğŸ”” Showing audio unlock prompt...
AudioCall.tsx:84 [AudioCall] ğŸ“Š WebRTC audio stats: {bytesReceived: 0, audioLevel: 0, jitter: 0, packetsLost: 0, packetsReceived: 0}
AudioCall.tsx:94 [AudioCall] âš ï¸ No audio data received from remote peer!
sw.js:194 [SW] Message received: {type: 'KEEP_ALIVE'}
sw.js:201 Uncaught TypeError: Cannot read properties of undefined (reading 'postMessage')
    at sw.js:201:22
(anonymous) @ sw.js:201Understand this error
AudioCall.tsx:84 [AudioCall] ğŸ“Š WebRTC audio stats: {bytesReceived: 0, audioLevel: 0, jitter: 0, packetsLost: 0, packetsReceived: 0}
AudioCall.tsx:94 [AudioCall] âš ï¸ No audio data received from remote peer!
AudioCall.tsx:200 [AudioCall] ğŸ”“ User clicked unlock audio
AudioCall.tsx:211 [AudioCall] âš ï¸ Could not find audio element
AudioCall.tsx:84 [AudioCall] ğŸ“Š WebRTC audio stats: {bytesReceived: 0, audioLevel: 0, jitter: 0, packetsLost: 0, packetsReceived: 0}
AudioCall.tsx:94 [AudioCall] âš ï¸ No audio data received from remote peer!
AudioCall.tsx:84 [AudioCall] ğŸ“Š WebRTC audio stats: {bytesReceived: 0, audioLevel: 0, jitter: 0, packetsLost: 0, packetsReceived: 0}
AudioCall.tsx:94 [AudioCall] âš ï¸ No audio data received from remote peer!
AudioCall.tsx:84 [AudioCall] ğŸ“Š WebRTC audio stats: {bytesReceived: 0, audioLevel: 0, jitter: 0, packetsLost: 0, packetsReceived: 0}
AudioCall.tsx:94 [AudioCall] âš ï¸ No audio data received from remote peer!
AudioCall.tsx:84 [AudioCall] ğŸ“Š WebRTC audio stats: {bytesReceived: 0, audioLevel: 0, jitter: 0, packetsLost: 0, packetsReceived: 0}
AudioCall.tsx:94 [AudioCall] âš ï¸ No audio data received from remote peer!
AudioCall.tsx:84 [AudioCall] ğŸ“Š WebRTC audio stats: {bytesReceived: 0, audioLevel: 0, jitter: 0, packetsLost: 0, packetsReceived: 0}
AudioCall.tsx:94 [AudioCall] âš ï¸ No audio data received from remote peer!
AudioCall.tsx:84 [AudioCall] ğŸ“Š WebRTC audio stats: {bytesReceived: 0, audioLevel: 0, jitter: 0, packetsLost: 0, packetsReceived: 0}
AudioCall.tsx:94 [AudioCall] âš ï¸ No audio data received from remote peer!
AudioCall.tsx:84 [AudioCall] ğŸ“Š WebRTC audio stats: {bytesReceived: 0, audioLevel: 0, jitter: 0, packetsLost: 0, packetsReceived: 0}
AudioCall.tsx:94 [AudioCall] âš ï¸ No audio data received from remote peer!
AudioCall.tsx:84 [AudioCall] ğŸ“Š WebRTC audio stats: {bytesReceived: 0, audioLevel: 0, jitter: 0, packetsLost: 0, packetsReceived: 0}
AudioCall.tsx:94 [AudioCall] âš ï¸ No audio data received from remote peer!