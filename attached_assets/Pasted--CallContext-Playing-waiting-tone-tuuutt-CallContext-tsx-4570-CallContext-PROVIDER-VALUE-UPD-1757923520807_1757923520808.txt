[CallContext] Playing waiting tone - tuuutt
CallContext.tsx:4570 [CallContext] üî• PROVIDER VALUE UPDATE: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false, incomingCallId: undefined}
useCall.ts:12 [useCall] üî• Context value: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false}
VideoCall.tsx:14 [VideoCall] Component rendering with activeCall: {callId: 'call_1757923490334_2_3', callType: 'video', status: 'calling', isIncoming: false, peerUserId: 3,¬†‚Ä¶}
CallContext.tsx:579 [CallContext] üß™ ENHANCED: Active candidate pair: {callId: 'call_1757923490334_2_3', state: 'succeeded', priority: 7962116751024340000, bytesSent: 111712, bytesReceived: 6849,¬†‚Ä¶}
CallContext.tsx:546 [CallContext] üì§ ENHANCED: Audio sender stats: {callId: 'call_1757923490334_2_3', bytesSent: 30055, bytesDelta: 7648, packetsSent: 399, packetsDelta: 100,¬†‚Ä¶}
CallContext.tsx:565 [CallContext] üåê ENHANCED: Transport stats: {callId: 'call_1757923490334_2_3', dtlsState: 'connected', iceState: 'connected', selectedCandidatePairId: 'CPynXqEAxs_89SnsGp8'}
CallContext.tsx:810 [CallContext] Playing waiting tone - tuuutt
CallContext.tsx:4570 [CallContext] üî• PROVIDER VALUE UPDATE: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false, incomingCallId: undefined}
useCall.ts:12 [useCall] üî• Context value: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false}
VideoCall.tsx:14 [VideoCall] Component rendering with activeCall: {callId: 'call_1757923490334_2_3', callType: 'video', status: 'calling', isIncoming: false, peerUserId: 3,¬†‚Ä¶}
CallContext.tsx:579 [CallContext] üß™ ENHANCED: Active candidate pair: {callId: 'call_1757923490334_2_3', state: 'succeeded', priority: 7962116751024340000, bytesSent: 133089, bytesReceived: 8335,¬†‚Ä¶}
CallContext.tsx:546 [CallContext] üì§ ENHANCED: Audio sender stats: {callId: 'call_1757923490334_2_3', bytesSent: 37246, bytesDelta: 7191, packetsSent: 499, packetsDelta: 100,¬†‚Ä¶}
CallContext.tsx:565 [CallContext] üåê ENHANCED: Transport stats: {callId: 'call_1757923490334_2_3', dtlsState: 'connected', iceState: 'connected', selectedCandidatePairId: 'CPynXqEAxs_89SnsGp8'}
CallContext.tsx:1120 [CallContext] Received message: {type: 'user_status', payload: {‚Ä¶}}
CallContext.tsx:1123 [CallContext] üîç DEBUG MESSAGE ROUTING: {messageType: 'user_status', hasPayload: true, messageKeys: Array(2), routingToCase: 'user_status'}
CallContext.tsx:1187 [CallContext] Received user status update: {userId: 4, status: 'offline'}
CallContext.tsx:810 [CallContext] Playing waiting tone - tuuutt
CallContext.tsx:4570 [CallContext] üî• PROVIDER VALUE UPDATE: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false, incomingCallId: undefined}
useCall.ts:12 [useCall] üî• Context value: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false}
VideoCall.tsx:14 [VideoCall] Component rendering with activeCall: {callId: 'call_1757923490334_2_3', callType: 'video', status: 'calling', isIncoming: false, peerUserId: 3,¬†‚Ä¶}
CallContext.tsx:1120 [CallContext] Received message: {type: 'call_accepted', payload: {‚Ä¶}}
CallContext.tsx:1123 [CallContext] üîç DEBUG MESSAGE ROUTING: {messageType: 'call_accepted', hasPayload: true, messageKeys: Array(2), routingToCase: 'call_accepted'}
CallContext.tsx:1556 [CallContext] Call accepted, payload: {callId: 'call_1757923490334_2_3'}
CallContext.tsx:1557 [CallContext] Current activeCall (state): null
CallContext.tsx:1558 [CallContext] Current activeCall (ref): {callId: 'call_1757923490334_2_3', callType: 'video', status: 'calling', isIncoming: false, peerUserId: 3,¬†‚Ä¶}
CallContext.tsx:1559 [CallContext] Current incomingCall: null
CallContext.tsx:1562 [CallContext] FORCE STOPPING ALL RINGTONES - call accepted
CallContext.tsx:665 [CallContext] üîá STOPPING ALL RINGTONES - comprehensive cleanup
CallContext.tsx:670 [CallContext] Stopping HTML5 ringtone audio
CallContext.tsx:679 [CallContext] ‚úÖ HTML5 ringtone stopped and cleared
CallContext.tsx:720 [CallContext] ‚úÖ Stopped 0 audio elements
CallContext.tsx:764 [CallContext] ‚úÖ RINGTONE CLEANUP COMPLETED
CallContext.tsx:842 [CallContext] üîá AGGRESSIVE AUDIO CLEANUP - STOPPING ALL AUDIO
CallContext.tsx:854 [CallContext] Force stopping current oscillator
CallContext.tsx:866 [CallContext] Force disconnecting current gain node
CallContext.tsx:876 [CallContext] üí• NUCLEAR AUDIO CLEANUP - Closing ALL AudioContext instances
CallContext.tsx:892 [CallContext] ‚úÖ Closed AudioContext
CallContext.tsx:915 [CallContext] Clearing stored waiting tone interval
CallContext.tsx:922 [CallContext] üí• NUCLEAR INTERVAL CLEANUP - Clearing ALL intervals (except protected timers)
CallContext.tsx:958 [CallContext] ‚úÖ Nuclear interval cleanup completed (protected timers preserved)
CallContext.tsx:963 [CallContext] ‚úÖ AGGRESSIVE AUDIO CLEANUP COMPLETED
CallContext.tsx:1588 [CallContext] Updating call status to connected
CallContext.tsx:1591 [CallContext] Stopping ALL ringtone sources - call accepted
CallContext.tsx:1601 [CallContext] ‚úÖ HTML5 ringtone force stopped
CallContext.tsx:1652 [CallContext] Waiting for receiver to be ready for WebRTC...
CallContext.tsx:4570 [CallContext] üî• PROVIDER VALUE UPDATE: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false, incomingCallId: undefined}
useCall.ts:12 [useCall] üî• Context value: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false}
VideoCall.tsx:14 [VideoCall] Component rendering with activeCall: {callId: 'call_1757923490334_2_3', callType: 'video', status: 'connected', isIncoming: false, peerUserId: 3,¬†‚Ä¶}
VideoCall.tsx:87 [VideoCall] üïê Timer check: {hasActiveCall: true, status: 'connected', startTime: Mon Sep 15 2025 15:05:03 GMT+0700 (Western Indonesia Time)}
VideoCall.tsx:100 [VideoCall] üïê STARTING robust timer, startTime: Mon Sep 15 2025 15:05:03 GMT+0700 (Western Indonesia Time)
VideoCall.tsx:114 [VideoCall] üïê Timer tick: 00:00:00 elapsed: 2
VideoCall.tsx:123 [VideoCall] üïê Robust timer started, interval: 44
useCall.ts:12 [useCall] üî• Context value: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false}
VideoCall.tsx:14 [VideoCall] Component rendering with activeCall: {callId: 'call_1757923490334_2_3', callType: 'video', status: 'connected', isIncoming: false, peerUserId: 3,¬†‚Ä¶}
CallContext.tsx:1120 [CallContext] Received message: {type: 'webrtc_ready', payload: {‚Ä¶}}
CallContext.tsx:1123 [CallContext] üîç DEBUG MESSAGE ROUTING: {messageType: 'webrtc_ready', hasPayload: true, messageKeys: Array(2), routingToCase: 'webrtc_ready'}
CallContext.tsx:1688 [CallContext] Received WebRTC ready signal, payload: {callId: 'call_1757923490334_2_3'}
CallContext.tsx:1689 [CallContext] Current activeCall (state): null
CallContext.tsx:1690 [CallContext] Current activeCall (ref): {callId: 'call_1757923490334_2_3', callType: 'video', status: 'connected', isIncoming: false, peerUserId: 3,¬†‚Ä¶}
CallContext.tsx:1696 [CallContext] ‚úÖ Found activeCall and peerConnection for WebRTC ready
CallContext.tsx:1702 [CallContext] ‚úÖ Cleared fallback timeout - received ready signal
CallContext.tsx:1707 [CallContext] üîÑ ENHANCED: Preparing WebRTC offer with proper track validation...
CallContext.tsx:1710 [CallContext] üé§ ENHANCED: Validating local track attachment before offer...
CallContext.tsx:1712 [CallContext] üìä Current senders before offer: 2
CallContext.tsx:1717 [CallContext] Sender 0: {hasTrack: true, kind: 'audio', enabled: true, readyState: 'live', id: '641b7912-7bb4-4d6b-8b06-e7f211dae0cd'}
CallContext.tsx:1717 [CallContext] Sender 1: {hasTrack: true, kind: 'video', enabled: true, readyState: 'live', id: '08ff6d6e-31c9-4bcd-ad6f-af1b576244b6'}
CallContext.tsx:1752 [CallContext] ‚úÖ ENHANCED: Audio track properly attached before offer creation
CallContext.tsx:1756 [CallContext] üîÑ ENHANCED: Creating offer with proper constraints...
CallContext.tsx:1766 [CallContext] üìã ENHANCED: Validating offer SDP...
CallContext.tsx:1774 [CallContext] ‚úÖ Found audio media section in offer
2CallContext.tsx:1778 [CallContext] ‚úÖ Found proper audio direction in offer: a=sendrecv
CallContext.tsx:1792 [CallContext] ‚úÖ ENHANCED: Local description set successfully with proper validation
CallContext.tsx:1805 [CallContext] ‚ö†Ô∏è WebSocket not ready, using HTTP API fallback
VideoCall.tsx:114 [VideoCall] üïê Timer tick: 00:00:01 elapsed: 1013
useCall.ts:12 [useCall] üî• Context value: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false}
VideoCall.tsx:14 [VideoCall] Component rendering with activeCall: {callId: 'call_1757923490334_2_3', callType: 'video', status: 'connected', isIncoming: false, peerUserId: 3,¬†‚Ä¶}
CallContext.tsx:1822 [CallContext] ‚úÖ Sent WebRTC offer via HTTP API fallback
CallContext.tsx:1120 [CallContext] Received message: {type: 'webrtc_answer', callId: 'call_1757923490334_2_3', answer: {‚Ä¶}}
CallContext.tsx:1123 [CallContext] üîç DEBUG MESSAGE ROUTING: {messageType: 'webrtc_answer', hasPayload: false, messageKeys: Array(3), routingToCase: 'webrtc_answer'}
CallContext.tsx:1255 [CallContext] üéØ Processing webrtc_answer message: {type: 'webrtc_answer', callId: 'call_1757923490334_2_3', answer: {‚Ä¶}}
CallContext.tsx:2860 [CallContext] üì° ENHANCED: Received WebRTC answer for callId: call_1757923490334_2_3
CallContext.tsx:2864 [CallContext] Current activeCall for answer: call_1757923490334_2_3
CallContext.tsx:2877 [CallContext] üì° ENHANCED: Setting remote description (answer) with validation
CallContext.tsx:2881 [CallContext] üìä Current signaling state: have-local-offer
CallContext.tsx:3105 [CallContext] üì° CALLER: Received remote stream in startCall
CallContext.tsx:3107 [CallContext] üì° CALLER: Remote stream details: {id: 'e0dd203d-27bb-43fd-bec7-39df73383371', active: true, audioTracks: 1, videoTracks: 1}
CallContext.tsx:3115 [CallContext] üì° CALLER: Storing remote stream globally
CallContext.tsx:3119 [CallContext] Remote audio received - stopping waiting tone
CallContext.tsx:842 [CallContext] üîá AGGRESSIVE AUDIO CLEANUP - STOPPING ALL AUDIO
CallContext.tsx:876 [CallContext] üí• NUCLEAR AUDIO CLEANUP - Closing ALL AudioContext instances
CallContext.tsx:892 [CallContext] ‚úÖ Closed AudioContext
CallContext.tsx:922 [CallContext] üí• NUCLEAR INTERVAL CLEANUP - Clearing ALL intervals (except protected timers)
CallContext.tsx:928 [CallContext] üõ°Ô∏è Protecting robust video call timer: 44
CallContext.tsx:958 [CallContext] ‚úÖ Nuclear interval cleanup completed (protected timers preserved)
CallContext.tsx:963 [CallContext] ‚úÖ AGGRESSIVE AUDIO CLEANUP COMPLETED
CallContext.tsx:3105 [CallContext] üì° CALLER: Received remote stream in startCall
CallContext.tsx:3107 [CallContext] üì° CALLER: Remote stream details: {id: 'e0dd203d-27bb-43fd-bec7-39df73383371', active: true, audioTracks: 1, videoTracks: 1}
CallContext.tsx:3115 [CallContext] üì° CALLER: Storing remote stream globally
CallContext.tsx:3119 [CallContext] Remote audio received - stopping waiting tone
CallContext.tsx:842 [CallContext] üîá AGGRESSIVE AUDIO CLEANUP - STOPPING ALL AUDIO
CallContext.tsx:876 [CallContext] üí• NUCLEAR AUDIO CLEANUP - Closing ALL AudioContext instances
CallContext.tsx:892 [CallContext] ‚úÖ Closed AudioContext
CallContext.tsx:922 [CallContext] üí• NUCLEAR INTERVAL CLEANUP - Clearing ALL intervals (except protected timers)
CallContext.tsx:928 [CallContext] üõ°Ô∏è Protecting robust video call timer: 44
CallContext.tsx:958 [CallContext] ‚úÖ Nuclear interval cleanup completed (protected timers preserved)
CallContext.tsx:963 [CallContext] ‚úÖ AGGRESSIVE AUDIO CLEANUP COMPLETED
CallContext.tsx:2889 [CallContext] ‚úÖ ENHANCED: Remote description (answer) set successfully on caller side
CallContext.tsx:2892 [CallContext] üîÑ ENHANCED: Starting transport connectivity monitoring
CallContext.tsx:483 [CallContext] üîÑ ENHANCED: Starting comprehensive transport state monitoring for callId: call_1757923490334_2_3
CallContext.tsx:2896 [CallContext] üìä Post-answer transceiver validation:
CallContext.tsx:2899 [CallContext] Final Transceiver 0: {direction: 'sendrecv', currentDirection: 'sendrecv', mid: '0', kind: 'audio', senderTrack: {‚Ä¶}}
CallContext.tsx:2899 [CallContext] Final Transceiver 1: {direction: 'sendrecv', currentDirection: 'sendrecv', mid: '1', kind: 'video', senderTrack: {‚Ä¶}}
CallContext.tsx:2918 [CallContext] üéØ ENHANCED: Waiting for ontrack event to provide remote stream to caller...
CallContext.tsx:4570 [CallContext] üî• PROVIDER VALUE UPDATE: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false, incomingCallId: undefined}
useCall.ts:12 [useCall] üî• Context value: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false}
VideoCall.tsx:14 [VideoCall] Component rendering with activeCall: {callId: 'call_1757923490334_2_3', callType: 'video', status: 'connected', isIncoming: false, peerUserId: 3,¬†‚Ä¶}
VideoCall.tsx:27 [VideoCall] Remote stream changed: MediaStream¬†{id: 'e0dd203d-27bb-43fd-bec7-39df73383371', active: true, onaddtrack: null, onremovetrack: null, onactive: null,¬†‚Ä¶}
VideoCall.tsx:29 [VideoCall] ‚úÖ Setting remote stream to video element
VideoCall.tsx:30 [VideoCall] Remote stream details: {id: 'e0dd203d-27bb-43fd-bec7-39df73383371', active: true, audioTracks: 1, videoTracks: 1}
VideoCall.tsx:39 [VideoCall] Track 0: {kind: 'audio', enabled: true, muted: false, readyState: 'live', id: '6f068fd7-21b9-4a9c-b6e3-4d42cf51c8f5'}
VideoCall.tsx:39 [VideoCall] Track 1: {kind: 'video', enabled: true, muted: false, readyState: 'live', id: 'ccbce662-642d-468a-b950-87b8d043b1eb'}
CallContext.tsx:579 [CallContext] üß™ ENHANCED: Active candidate pair: {callId: 'call_1757923490334_2_3', state: 'succeeded', priority: 9115038255631187000, bytesSent: 176478, bytesReceived: 22657,¬†‚Ä¶}
CallContext.tsx:565 [CallContext] üåê ENHANCED: Transport stats: {callId: 'call_1757923490334_2_3', dtlsState: 'connected', iceState: 'connected', selectedCandidatePairId: 'CPynXqEAxs_yy5ORNMN'}
CallContext.tsx:599 [CallContext] ‚ùå CRITICAL: No audio RTP flow detected after 10 seconds!
checkConnectivity @ CallContext.tsx:599
await in checkConnectivity
startTransportStateMonitoring @ CallContext.tsx:616
handleWebRTCAnswer @ CallContext.tsx:2893
await in handleWebRTCAnswer
websocket.onmessage @ CallContext.tsx:1256Understand this error
CallContext.tsx:600 [CallContext] üîß Potential fixes needed:
checkConnectivity @ CallContext.tsx:600
await in checkConnectivity
startTransportStateMonitoring @ CallContext.tsx:616
handleWebRTCAnswer @ CallContext.tsx:2893
await in handleWebRTCAnswer
websocket.onmessage @ CallContext.tsx:1256Understand this error
CallContext.tsx:601 [CallContext] 1. Check if local tracks were added before offer creation
checkConnectivity @ CallContext.tsx:601
await in checkConnectivity
startTransportStateMonitoring @ CallContext.tsx:616
handleWebRTCAnswer @ CallContext.tsx:2893
await in handleWebRTCAnswer
websocket.onmessage @ CallContext.tsx:1256Understand this error
CallContext.tsx:602 [CallContext] 2. Verify transceiver directions are sendrecv
checkConnectivity @ CallContext.tsx:602
await in checkConnectivity
startTransportStateMonitoring @ CallContext.tsx:616
handleWebRTCAnswer @ CallContext.tsx:2893
await in handleWebRTCAnswer
websocket.onmessage @ CallContext.tsx:1256Understand this error
CallContext.tsx:603 [CallContext] 3. Check for DTLS/ICE connectivity issues
checkConnectivity @ CallContext.tsx:603
await in checkConnectivity
startTransportStateMonitoring @ CallContext.tsx:616
handleWebRTCAnswer @ CallContext.tsx:2893
await in handleWebRTCAnswer
websocket.onmessage @ CallContext.tsx:1256Understand this error
CallContext.tsx:3134 [CallContext] ‚ùå CALLER: Remote audio element not found in startCall
VideoCall.tsx:58 [VideoCall] ‚úÖ Remote video playing successfully with audio
CallContext.tsx:579 [CallContext] üß™ ENHANCED: Active candidate pair: {callId: 'call_1757923490334_2_3', state: 'succeeded', priority: 9115038255631187000, bytesSent: 202466, bytesReceived: 336521,¬†‚Ä¶}
CallContext.tsx:511 [CallContext] üìä ENHANCED: Audio RTP flow stats: {callId: 'call_1757923490334_2_3', bytesReceived: 7258, bytesDelta: 6272, packetsReceived: 115, packetsDelta: 98,¬†‚Ä¶}
CallContext.tsx:525 [CallContext] ‚úÖ ENHANCED: Audio RTP flow detected - call is truly connected!
CallContext.tsx:546 [CallContext] üì§ ENHANCED: Audio sender stats: {callId: 'call_1757923490334_2_3', bytesSent: 59351, bytesDelta: 7772, packetsSent: 774, packetsDelta: 100,¬†‚Ä¶}
CallContext.tsx:565 [CallContext] üåê ENHANCED: Transport stats: {callId: 'call_1757923490334_2_3', dtlsState: 'connected', iceState: 'connected', selectedCandidatePairId: 'CPynXqEAxs_yy5ORNMN'}
CallContext.tsx:579 [CallContext] üß™ ENHANCED: Active candidate pair: {callId: 'call_1757923490334_2_3', state: 'succeeded', priority: 9115038255631187000, bytesSent: 227931, bytesReceived: 687002,¬†‚Ä¶}
CallContext.tsx:511 [CallContext] üìä ENHANCED: Audio RTP flow stats: {callId: 'call_1757923490334_2_3', bytesReceived: 14546, bytesDelta: 7288, packetsReceived: 214, packetsDelta: 99,¬†‚Ä¶}
CallContext.tsx:546 [CallContext] üì§ ENHANCED: Audio sender stats: {callId: 'call_1757923490334_2_3', bytesSent: 66243, bytesDelta: 6892, packetsSent: 874, packetsDelta: 100,¬†‚Ä¶}
CallContext.tsx:565 [CallContext] üåê ENHANCED: Transport stats: {callId: 'call_1757923490334_2_3', dtlsState: 'connected', iceState: 'connected', selectedCandidatePairId: 'CPynXqEAxs_yy5ORNMN'}
CallContext.tsx:579 [CallContext] üß™ ENHANCED: Active candidate pair: {callId: 'call_1757923490334_2_3', state: 'succeeded', priority: 9115038255631187000, bytesSent: 250877, bytesReceived: 1151372,¬†‚Ä¶}
CallContext.tsx:511 [CallContext] üìä ENHANCED: Audio RTP flow stats: {callId: 'call_1757923490334_2_3', bytesReceived: 23207, bytesDelta: 8661, packetsReceived: 316, packetsDelta: 102,¬†‚Ä¶}
CallContext.tsx:546 [CallContext] üì§ ENHANCED: Audio sender stats: {callId: 'call_1757923490334_2_3', bytesSent: 73620, bytesDelta: 7377, packetsSent: 975, packetsDelta: 101,¬†‚Ä¶}
CallContext.tsx:565 [CallContext] üåê ENHANCED: Transport stats: {callId: 'call_1757923490334_2_3', dtlsState: 'connected', iceState: 'connected', selectedCandidatePairId: 'CPynXqEAxs_yy5ORNMN'}