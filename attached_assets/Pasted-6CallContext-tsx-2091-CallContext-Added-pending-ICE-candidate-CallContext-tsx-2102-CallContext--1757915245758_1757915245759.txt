6CallContext.tsx:2091 [CallContext] âœ… Added pending ICE candidate
CallContext.tsx:2102 [CallContext] âœ… Local description (answer) set successfully
CallContext.tsx:2113 [CallContext] âš ï¸ WebSocket not ready for answer, using HTTP API fallback
CallContext.tsx:2130 [CallContext] âœ… Sent WebRTC answer via HTTP API fallback
CallContext.tsx:2434 [CallContext] acceptCall function called
CallContext.tsx:2435 [CallContext] incomingCall: {callId: 'call_1757915142696_4_2', callType: 'audio', status: 'ringing', isIncoming: true, peerUserId: 4,Â â€¦}
CallContext.tsx:2436 [CallContext] ws connected: true
CallContext.tsx:2437 [CallContext] user: {id: 2, callsign: 'eko', nrp: '12345', fullName: 'eko a', rank: 'SPC',Â â€¦}
CallContext.tsx:2457 [CallContext] Accepting call
CallContext.tsx:2460 [CallContext] ğŸ”‡ FORCE STOPPING ALL RINGTONES - Call accepted
CallContext.tsx:285 [CallContext] ğŸ”‡ STOPPING ALL RINGTONES - comprehensive cleanup
CallContext.tsx:290 [CallContext] Stopping HTML5 ringtone audio
CallContext.tsx:299 [CallContext] âœ… HTML5 ringtone stopped and cleared
CallContext.tsx:308 [CallContext] Force stopping current global ringtone
CallContext.tsx:316 [CallContext] âœ… Global ringtone reference stopped
CallContext.tsx:340 [CallContext] âœ… Stopped 0 audio elements
CallContext.tsx:384 [CallContext] âœ… RINGTONE CLEANUP COMPLETED
CallContext.tsx:2486 [CallContext] Requesting media permissions for mobile (accept call)...
CallContext.tsx:3797 [CallContext] ğŸ”¥ PROVIDER VALUE UPDATE: {incomingCall: {â€¦}, activeCall: null, hasIncomingCall: true, incomingCallId: 'call_1757915142696_4_2'}
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: {â€¦}, activeCall: null, hasIncomingCall: true}
IncomingCallModal.tsx:6 [IncomingCallModal] ğŸ”¥ COMPONENT RENDERED - START
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: {â€¦}, activeCall: null, hasIncomingCall: true}
IncomingCallModal.tsx:11 [IncomingCallModal] ğŸ”¥ After useCall hook - incomingCall: {callId: 'call_1757915142696_4_2', callType: 'audio', status: 'ringing', isIncoming: true, peerUserId: 4,Â â€¦}
IncomingCallModal.tsx:12 [IncomingCallModal] ğŸ”¥ incomingCall type check: object
IncomingCallModal.tsx:13 [IncomingCallModal] ğŸ”¥ incomingCall falsy check: false
IncomingCallModal.tsx:20 [IncomingCallModal] âœ… SHOWING MODAL for call: call_1757915142696_4_2
IncomingCallModal.tsx:21 [IncomingCallModal] Modal details: {isGroupCall: undefined, groupName: undefined, callType: 'audio', fromUser: 'dino'}
CallContext.tsx:2488 [CallContext] Got local media stream for incoming call
CallContext.tsx:2501 [CallContext] Added local stream to existing peerConnection
CallContext.tsx:2540 [CallContext] ğŸ¯ Call accepted - enabling audio and activating remote stream
CallContext.tsx:2545 [CallContext] ğŸ¯ Activating pending remote stream with tracks: 1
CallContext.tsx:2550 [CallContext] ğŸ”Š Audio track enabled after call accepted
CallContext.tsx:3797 [CallContext] ğŸ”¥ PROVIDER VALUE UPDATE: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false, incomingCallId: undefined}
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
IncomingCallModal.tsx:6 [IncomingCallModal] ğŸ”¥ COMPONENT RENDERED - START
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
IncomingCallModal.tsx:11 [IncomingCallModal] ğŸ”¥ After useCall hook - incomingCall: null
IncomingCallModal.tsx:12 [IncomingCallModal] ğŸ”¥ incomingCall type check: object
IncomingCallModal.tsx:13 [IncomingCallModal] ğŸ”¥ incomingCall falsy check: true
IncomingCallModal.tsx:16 [IncomingCallModal] No incoming call, returning null
CallContext.tsx:3785 [CallContext] ğŸ”¥ INCOMING CALL STATE CHANGED: null
CallContext.tsx:3797 [CallContext] ğŸ”¥ PROVIDER VALUE UPDATE: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false, incomingCallId: undefined}
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
AudioCall.tsx:23 [AudioCall] Component rendering with activeCall: {callId: 'call_1757915142696_4_2', callType: 'audio', status: 'connected', isIncoming: true, peerUserId: 4,Â â€¦}
AudioCall.tsx:24 [AudioCall] remoteAudioStream: MediaStreamÂ {id: '688b3652-c58a-49b8-b754-6b6193d9eb48', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
ChatList.tsx:149 ğŸ“‹ CHATLIST: Removing WebSocket event listeners
AudioCall.tsx:50 [AudioCall] Mobile device detected: false
AudioCall.tsx:58 [AudioCall] Earphone connected: false Current output: speaker
AudioCall.tsx:75 [AudioCall] Remote stream effect triggered, remoteAudioStream: MediaStreamÂ {id: '688b3652-c58a-49b8-b754-6b6193d9eb48', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
AudioCall.tsx:82 [AudioCall] Setting up remote audio stream...
AudioCall.tsx:86 [AudioCall] âœ… Found remote audio element, setting stream
AudioCall.tsx:170 [AudioCall] ğŸ§ Audio diagnostics enabled
AudioCall.tsx:179 [AudioCall] ğŸŒ Browser environment: {userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebâ€¦KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36', platform: 'Win32', isSecureContext: true, protocol: 'https:', hostname: 'd6b9d90f-fa84-48b1-86ca-93bf47f4824f-00-1eu5s7yk2ewfr.picard.replit.dev'}
AudioCall.tsx:187 [AudioCall] ğŸ”Š Attempt 1 - Audio element state: {paused: true, muted: false, volume: 1, readyState: 0, networkState: 3,Â â€¦}
AudioCall.tsx:202 [AudioCall] ğŸ¤ Remote stream info: {tracksCount: 1, streamActive: true, streamId: '688b3652-c58a-49b8-b754-6b6193d9eb48'}
AudioCall.tsx:208 [AudioCall] Track 0: {enabled: true, muted: false, readyState: 'live', kind: 'audio', id: 'f64ecf5b-5f0d-4f0d-a155-d7228943191c',Â â€¦}
AudioCall.tsx:220 [AudioCall] ğŸ® Checking autoplay policy...
AudioCall.tsx:454 [AudioCall] Setting up call duration timer
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
AudioCall.tsx:23 [AudioCall] Component rendering with activeCall: {callId: 'call_1757915142696_4_2', callType: 'audio', status: 'connected', isIncoming: true, peerUserId: 4,Â â€¦}
AudioCall.tsx:24 [AudioCall] remoteAudioStream: MediaStreamÂ {id: '688b3652-c58a-49b8-b754-6b6193d9eb48', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
AudioCall.tsx:154 [AudioCall] â³ Audio waiting for data
AudioCall.tsx:150 [AudioCall] ğŸ”„ Audio load started
AudioCall.tsx:152 [AudioCall] ğŸ“‹ Audio metadata loaded
AudioCall.tsx:151 [AudioCall] ğŸ“Š Audio data loaded
AudioCall.tsx:124 [AudioCall] ğŸ”Š Audio can play - ready state: 4
AudioCall.tsx:129 [AudioCall] ğŸµ Audio is playing - currentTime: 0
AudioCall.tsx:229 [AudioCall] âœ… Remote audio playing successfully (attempt 1)
CallContext.tsx:2606 [CallContext] ğŸ“¤ Sending WebRTC ready signal to caller: 4
CallContext.tsx:2614 [CallContext] âœ… WebRTC ready signal sent successfully
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
AudioCall.tsx:23 [AudioCall] Component rendering with activeCall: {callId: 'call_1757915142696_4_2', callType: 'audio', status: 'connected', isIncoming: true, peerUserId: 4,Â â€¦}
AudioCall.tsx:24 [AudioCall] remoteAudioStream: MediaStreamÂ {id: '688b3652-c58a-49b8-b754-6b6193d9eb48', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
AudioCall.tsx:153 [AudioCall] ğŸ“ˆ Audio loading progress
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
AudioCall.tsx:23 [AudioCall] Component rendering with activeCall: {callId: 'call_1757915142696_4_2', callType: 'audio', status: 'connected', isIncoming: true, peerUserId: 4,Â â€¦}
AudioCall.tsx:24 [AudioCall] remoteAudioStream: MediaStreamÂ {id: '688b3652-c58a-49b8-b754-6b6193d9eb48', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
AudioCall.tsx:261 [AudioCall] ğŸ“Š Audio status after play: {paused: false, currentTime: 1.122, volume: 1}
AudioCall.tsx:273 [AudioCall] âœ… HTML5 audio working correctly, currentTime: 1.122
CallContext.tsx:717 [CallContext] Received message: {type: 'webrtc_offer', callId: 'call_1757915142696_4_2', offer: {â€¦}}
CallContext.tsx:832 [CallContext] ğŸ¯ Processing webrtc_offer message: {type: 'webrtc_offer', callId: 'call_1757915142696_4_2', offer: {â€¦}}
CallContext.tsx:2053 [CallContext] Received WebRTC offer for callId: call_1757915142696_4_2
CallContext.tsx:2060 [CallContext] Current activeCall: call_1757915142696_4_2
CallContext.tsx:2061 [CallContext] Current incomingCall: undefined
CallContext.tsx:2062 [CallContext] Looking for callId: call_1757915142696_4_2
CallContext.tsx:2080 [CallContext] Processing WebRTC offer...
CallContext.tsx:2082 [CallContext] âœ… Remote description set successfully
CallContext.tsx:2102 [CallContext] âœ… Local description (answer) set successfully
CallContext.tsx:2113 [CallContext] âš ï¸ WebSocket not ready for answer, using HTTP API fallback
CallContext.tsx:2130 [CallContext] âœ… Sent WebRTC answer via HTTP API fallback
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
AudioCall.tsx:23 [AudioCall] Component rendering with activeCall: {callId: 'call_1757915142696_4_2', callType: 'audio', status: 'connected', isIncoming: true, peerUserId: 4,Â â€¦}
AudioCall.tsx:24 [AudioCall] remoteAudioStream: MediaStreamÂ {id: '688b3652-c58a-49b8-b754-6b6193d9eb48', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
AudioCall.tsx:23 [AudioCall] Component rendering with activeCall: {callId: 'call_1757915142696_4_2', callType: 'audio', status: 'connected', isIncoming: true, peerUserId: 4,Â â€¦}
AudioCall.tsx:24 [AudioCall] remoteAudioStream: MediaStreamÂ {id: '688b3652-c58a-49b8-b754-6b6193d9eb48', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
AudioCall.tsx:23 [AudioCall] Component rendering with activeCall: {callId: 'call_1757915142696_4_2', callType: 'audio', status: 'connected', isIncoming: true, peerUserId: 4,Â â€¦}
AudioCall.tsx:24 [AudioCall] remoteAudioStream: MediaStreamÂ {id: '688b3652-c58a-49b8-b754-6b6193d9eb48', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
AudioCall.tsx:23 [AudioCall] Component rendering with activeCall: {callId: 'call_1757915142696_4_2', callType: 'audio', status: 'connected', isIncoming: true, peerUserId: 4,Â â€¦}
AudioCall.tsx:24 [AudioCall] remoteAudioStream: MediaStreamÂ {id: '688b3652-c58a-49b8-b754-6b6193d9eb48', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
AudioCall.tsx:23 [AudioCall] Component rendering with activeCall: {callId: 'call_1757915142696_4_2', callType: 'audio', status: 'connected', isIncoming: true, peerUserId: 4,Â â€¦}
AudioCall.tsx:24 [AudioCall] remoteAudioStream: MediaStreamÂ {id: '688b3652-c58a-49b8-b754-6b6193d9eb48', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
AudioCall.tsx:23 [AudioCall] Component rendering with activeCall: {callId: 'call_1757915142696_4_2', callType: 'audio', status: 'connected', isIncoming: true, peerUserId: 4,Â â€¦}
AudioCall.tsx:24 [AudioCall] remoteAudioStream: MediaStreamÂ {id: '688b3652-c58a-49b8-b754-6b6193d9eb48', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
AudioCall.tsx:23 [AudioCall] Component rendering with activeCall: {callId: 'call_1757915142696_4_2', callType: 'audio', status: 'connected', isIncoming: true, peerUserId: 4,Â â€¦}
AudioCall.tsx:24 [AudioCall] remoteAudioStream: MediaStreamÂ {id: '688b3652-c58a-49b8-b754-6b6193d9eb48', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
AudioCall.tsx:23 [AudioCall] Component rendering with activeCall: {callId: 'call_1757915142696_4_2', callType: 'audio', status: 'connected', isIncoming: true, peerUserId: 4,Â â€¦}
AudioCall.tsx:24 [AudioCall] remoteAudioStream: MediaStreamÂ {id: '688b3652-c58a-49b8-b754-6b6193d9eb48', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
sw.js:194 [SW] Message received: {type: 'KEEP_ALIVE'}
sw.js:201 Uncaught TypeError: Cannot read properties of undefined (reading 'postMessage')
    at sw.js:201:22
(anonymous) @ sw.js:201Understand this error
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
AudioCall.tsx:23 [AudioCall] Component rendering with activeCall: 