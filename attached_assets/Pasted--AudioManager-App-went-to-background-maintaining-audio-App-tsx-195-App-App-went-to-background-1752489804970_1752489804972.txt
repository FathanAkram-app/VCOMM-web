[AudioManager] App went to background, maintaining audio...
App.tsx:195 [App] App went to background, maintaining connection...
audioManager.ts:93 [AudioManager] App returned to foreground, checking audio...
App.tsx:197 [App] App returned to foreground
CallContext.tsx:3587 [CallContext] üî• PROVIDER VALUE UPDATE: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false, incomingCallId: undefined}
useCall.ts:12 [useCall] üî• Context value: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false}
GroupVideoCallSimple.tsx:130 [GroupVideoCallSimple] Updating participants: [{‚Ä¶}]
GroupVideoCallSimple.tsx:131 [GroupVideoCallSimple] Current user ID: 3
GroupVideoCallSimple.tsx:132 [GroupVideoCallSimple] Available remote streams: Map(0)¬†{size: 0}
GroupVideoCallSimple.tsx:136 [GroupVideoCallSimple] Remote streams array: []
GroupVideoCallSimple.tsx:162 [GroupVideoCallSimple] üìã Final participants list: []
CallContext.tsx:667 [CallContext] Creating stable WebSocket for calls...
useCall.ts:12 [useCall] üî• Context value: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false}
CallContext.tsx:882 [CallContext] WebSocket disconnected
CallContext.tsx:3587 [CallContext] üî• PROVIDER VALUE UPDATE: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false, incomingCallId: undefined}
useCall.ts:12 [useCall] üî• Context value: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false}
CallContext.tsx:674 [CallContext] WebSocket connected successfully for calls
CallContext.tsx:698 [CallContext] Authenticated user 3 with WebSocket
CallContext.tsx:3587 [CallContext] üî• PROVIDER VALUE UPDATE: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false, incomingCallId: undefined}
useCall.ts:12 [useCall] üî• Context value: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false}
CallContext.tsx:717 [CallContext] Received message: {type: 'user_status', payload: {‚Ä¶}}
CallContext.tsx:776 [CallContext] Received user status update: {userId: 3, status: 'online'}
CallContext.tsx:717 [CallContext] Received message: {type: 'group_call_participants_update', payload: {‚Ä¶}}
CallContext.tsx:819 [CallContext] üî• GROUP_CALL_PARTICIPANTS_UPDATE received: {type: 'group_call_participants_update', payload: {‚Ä¶}}
CallContext.tsx:1627 [CallContext] Group call participants update: {type: 'group_call_participants_update', payload: {‚Ä¶}}
CallContext.tsx:1632 [CallContext] Comparing callIds - message: group_call_1752489728775_38_3 activeCall: group_call_1752489728775_38_3
CallContext.tsx:1633 [CallContext] ActiveCall groupId: 38
CallContext.tsx:1672 [CallContext] Extracted groupIds - message: 38 active: 38
CallContext.tsx:1673 [CallContext] CallId parts: (5)¬†['group', 'call', '1752489728775', '38', '3']
CallContext.tsx:1676 [CallContext] Group IDs match, updating participants: (2)¬†[3, 4]
CallContext.tsx:1687 [CallContext] Unique participants after deduplication: (2)¬†[3, 4]
CallContext.tsx:1690 [CallContext] üîç Fetching user names for participants: (2)¬†[3, 4]
CallContext.tsx:717 [CallContext] Received message: {type: 'initiate_group_webrtc', payload: {‚Ä¶}}
CallContext.tsx:1692 [CallContext] üìä Got all users data: 7
CallContext.tsx:1707 [CallContext] üìã Created participant objects: (2)¬†[{‚Ä¶}, {‚Ä¶}]
CallContext.tsx:1716 [CallContext] ‚úÖ Updated participants with names: (2)¬†[{‚Ä¶}, {‚Ä¶}]
CallContext.tsx:1728 [CallContext] üöÄ Dispatching group-participants-update event: (2)¬†[{‚Ä¶}, {‚Ä¶}]
CallContext.tsx:1729 [CallContext] üöÄ Event details: {callId: 'group_call_1752489728775_38_3', groupId: 38}
CallContext.tsx:3587 [CallContext] üî• PROVIDER VALUE UPDATE: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false, incomingCallId: undefined}
useCall.ts:12 [useCall] üî• Context value: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false}
GroupVideoCallSimple.tsx:130 [GroupVideoCallSimple] Updating participants: (2)¬†[{‚Ä¶}, {‚Ä¶}]
GroupVideoCallSimple.tsx:131 [GroupVideoCallSimple] Current user ID: 3
GroupVideoCallSimple.tsx:132 [GroupVideoCallSimple] Available remote streams: Map(0)¬†{size: 0}
GroupVideoCallSimple.tsx:136 [GroupVideoCallSimple] Remote streams array: []
GroupVideoCallSimple.tsx:145 [GroupVideoCallSimple] üîç Mapping participant dino (4): {streamKey: 'user_4', hasStream: false, streamId: undefined, streamActive: undefined, videoTracks: 0,¬†‚Ä¶}
GroupVideoCallSimple.tsx:162 [GroupVideoCallSimple] üìã Final participants list: [{‚Ä¶}]
useCall.ts:12 [useCall] üî• Context value: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false}
GroupVideoCallSimple.tsx:858 [ParticipantVideo] Effect triggered for dino: {hasVideoRef: false, hasStream: false, streamId: undefined, streamActive: undefined}
GroupVideoCallSimple.tsx:890 [ParticipantVideo] No stream or video ref for dino
GroupVideoCallSimple.tsx:200 [GroupVideoCallSimple] Participants update received, triggerWebRTC: true
CallContext.tsx:1741 [CallContext] ‚úÖ group-participants-update event dispatched successfully
GroupVideoCallSimple.tsx:193 [GroupVideoCallSimple] Initiating WebRTC for group call: {callId: 'group_call_1752489728775_38_3', participants: Array(2), forceInit: true}
GroupVideoCallSimple.tsx:567 [GroupVideoCallSimple] üöÄ Initiating WebRTC connections with participants: (2)¬†[{‚Ä¶}, {‚Ä¶}]
GroupVideoCallSimple.tsx:592 [GroupVideoCallSimple] üìä Local stream ready for offers: {streamId: '7d58fc03-30f4-4248-b2c6-d8a37af68626', active: true, videoTracks: 1, audioTracks: 1, videoEnabled: true,¬†‚Ä¶}
GroupVideoCallSimple.tsx:605 [GroupVideoCallSimple] üîó Creating offer for participant: dino (4)
GroupVideoCallSimple.tsx:460 [GroupVideoCallSimple] Creating new peer connection for user: 4
GroupVideoCallSimple.tsx:533 [GroupVideoCallSimple] ‚úÖ Added local track to peer connection for user 4 : {trackKind: 'audio', trackEnabled: true, trackReadyState: 'live', senderId: 'created'}
GroupVideoCallSimple.tsx:533 [GroupVideoCallSimple] ‚úÖ Added local track to peer connection for user 4 : {trackKind: 'video', trackEnabled: true, trackReadyState: 'live', senderId: 'created'}
GroupVideoCallSimple.tsx:541 [GroupVideoCallSimple] üìä Peer connection state for user 4 : {connectionState: 'new', iceConnectionState: 'new', iceGatheringState: 'new', signalingState: 'stable', localTracks: 2}
GroupVideoCallSimple.tsx:612 [GroupVideoCallSimple] üìä Current senders for user 4: 2
GroupVideoCallSimple.tsx:625 [GroupVideoCallSimple] ‚ÑπÔ∏è Tracks already added for user 4
useCall.ts:12 [useCall] üî• Context value: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false}
GroupVideoCallSimple.tsx:557 [GroupVideoCallSimple] üìä Updated peerConnections map, total connections: 1
GroupVideoCallSimple.tsx:558 [GroupVideoCallSimple] üìä Stored connection for users: [4]
GroupVideoCallSimple.tsx:632 [GroupVideoCallSimple] ‚úÖ Created and set local offer for user: 4
GroupVideoCallSimple.tsx:645 [GroupVideoCallSimple] Sent WebRTC offer to user: 4
4GroupVideoCallSimple.tsx:515 [GroupVideoCallSimple] Sent ICE candidate to user: 4
GroupVideoCallSimple.tsx:521 [GroupVideoCallSimple] Connection state for user 4 : connecting
GroupVideoCallSimple.tsx:567 [GroupVideoCallSimple] üöÄ Initiating WebRTC connections with participants: (2)¬†[{‚Ä¶}, {‚Ä¶}]
GroupVideoCallSimple.tsx:592 [GroupVideoCallSimple] üìä Local stream ready for offers: {streamId: '7d58fc03-30f4-4248-b2c6-d8a37af68626', active: true, videoTracks: 1, audioTracks: 1, videoEnabled: true,¬†‚Ä¶}
GroupVideoCallSimple.tsx:605 [GroupVideoCallSimple] üîó Creating offer for participant: dino (4)
GroupVideoCallSimple.tsx:612 [GroupVideoCallSimple] üìä Current senders for user 4: 2
GroupVideoCallSimple.tsx:625 [GroupVideoCallSimple] ‚ÑπÔ∏è Tracks already added for user 4
GroupVideoCallSimple.tsx:632 [GroupVideoCallSimple] ‚úÖ Created and set local offer for user: 4
GroupVideoCallSimple.tsx:645 [GroupVideoCallSimple] Sent WebRTC offer to user: 4
CallContext.tsx:717 [CallContext] Received message: {type: 'group_webrtc_answer', payload: {‚Ä¶}}
CallContext.tsx:848 [CallContext] Forwarding group WebRTC answer: {callId: 'group_call_1752489728775_38_3', answer: {‚Ä¶}, fromUserId: 4}
GroupVideoCallSimple.tsx:181 [GroupVideoCallSimple] Received group WebRTC answer: {callId: 'group_call_1752489728775_38_3', answer: {‚Ä¶}, fromUserId: 4}
GroupVideoCallSimple.tsx:338 [GroupVideoCallSimple] üì• PROCESSING WEBRTC ANSWER from user: 4
GroupVideoCallSimple.tsx:339 [GroupVideoCallSimple] üì• Answer data: {fromUserId: 4, hasAnswer: true, answerType: 'answer', callId: 'group_call_1752489728775_38_3'}
GroupVideoCallSimple.tsx:354 [GroupVideoCallSimple] üîó Peer connection state before setting remote description: {connectionState: 'connecting', iceConnectionState: 'checking', signalingState: 'have-local-offer'}
CallContext.tsx:717 [CallContext] Received message: {type: 'group_webrtc_ice_candidate', payload: {‚Ä¶}}
CallContext.tsx:855 [CallContext] Forwarding group WebRTC ICE candidate: {callId: 'group_call_1752489728775_38_3', candidate: {‚Ä¶}, fromUserId: 4}
GroupVideoCallSimple.tsx:187 [GroupVideoCallSimple] Received group WebRTC ICE candidate: {callId: 'group_call_1752489728775_38_3', candidate: {‚Ä¶}, fromUserId: 4}
GroupVideoCallSimple.tsx:378 [GroupVideoCallSimple] üßä Processing ICE candidate from user: 4
GroupVideoCallSimple.tsx:408 [GroupVideoCallSimple] ‚è≥ Queuing ICE candidate (no remote description yet) for user: 4
CallContext.tsx:717 [CallContext] Received message: {type: 'group_webrtc_ice_candidate', payload: {‚Ä¶}}
CallContext.tsx:855 [CallContext] Forwarding group WebRTC ICE candidate: {callId: 'group_call_1752489728775_38_3', candidate: {‚Ä¶}, fromUserId: 4}
GroupVideoCallSimple.tsx:187 [GroupVideoCallSimple] Received group WebRTC ICE candidate: {callId: 'group_call_1752489728775_38_3', candidate: {‚Ä¶}, fromUserId: 4}
GroupVideoCallSimple.tsx:378 [GroupVideoCallSimple] üßä Processing ICE candidate from user: 4
GroupVideoCallSimple.tsx:408 [GroupVideoCallSimple] ‚è≥ Queuing ICE candidate (no remote description yet) for user: 4
useCall.ts:12 [useCall] üî• Context value: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false}
GroupVideoCallSimple.tsx:470 [GroupVideoCallSimple] üé• RECEIVED REMOTE TRACK from user 4 : audio
GroupVideoCallSimple.tsx:471 [GroupVideoCallSimple] üé• Event streams: [MediaStream]
GroupVideoCallSimple.tsx:475 [GroupVideoCallSimple] üì¶ STORING REMOTE STREAM for user 4 : {streamId: 'bd4b483f-10d7-47dc-803e-e3d752ab7065', active: true, videoTracks: 1, audioTracks: 1}
GroupVideoCallSimple.tsx:470 [GroupVideoCallSimple] üé• RECEIVED REMOTE TRACK from user 4 : video
GroupVideoCallSimple.tsx:471 [GroupVideoCallSimple] üé• Event streams: [MediaStream]
GroupVideoCallSimple.tsx:475 [GroupVideoCallSimple] üì¶ STORING REMOTE STREAM for user 4 : {streamId: 'bd4b483f-10d7-47dc-803e-e3d752ab7065', active: true, videoTracks: 1, audioTracks: 1}
GroupVideoCallSimple.tsx:362 [GroupVideoCallSimple] ‚úÖ Set remote description for answer from user: 4
GroupVideoCallSimple.tsx:434 [GroupVideoCallSimple] üßä Processing 2 pending ICE candidates for user: 4
useCall.ts:12 [useCall] üî• Context value: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false}
2GroupVideoCallSimple.tsx:487 [GroupVideoCallSimple] üì¶ Updated remoteStreams map, total streams: 1
GroupVideoCallSimple.tsx:439 [GroupVideoCallSimple] ‚úÖ Added pending ICE candidate for user: 4
GroupVideoCallSimple.tsx:130 [GroupVideoCallSimple] Updating participants: (2)¬†[{‚Ä¶}, {‚Ä¶}]
GroupVideoCallSimple.tsx:131 [GroupVideoCallSimple] Current user ID: 3
GroupVideoCallSimple.tsx:132 [GroupVideoCallSimple] Available remote streams: Map(1)¬†{'user_4' => MediaStream}
GroupVideoCallSimple.tsx:136 [GroupVideoCallSimple] Remote streams array: [MediaStream]
GroupVideoCallSimple.tsx:145 [GroupVideoCallSimple] üîç Mapping participant dino (4): {streamKey: 'user_4', hasStream: true, streamId: 'bd4b483f-10d7-47dc-803e-e3d752ab7065', streamActive: true, videoTracks: 1,¬†‚Ä¶}
GroupVideoCallSimple.tsx:162 [GroupVideoCallSimple] üìã Final participants list: [{‚Ä¶}]
GroupVideoCallSimple.tsx:439 [GroupVideoCallSimple] ‚úÖ Added pending ICE candidate for user: 4
GroupVideoCallSimple.tsx:367 [GroupVideoCallSimple] üîó Peer connection state after answer: {connectionState: 'connecting', iceConnectionState: 'checking', signalingState: 'stable'}
useCall.ts:12 [useCall] üî• Context value: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false}
GroupVideoCallSimple.tsx:858 [ParticipantVideo] Effect triggered for dino: {hasVideoRef: false, hasStream: true, streamId: 'bd4b483f-10d7-47dc-803e-e3d752ab7065', streamActive: true}
GroupVideoCallSimple.tsx:890 [ParticipantVideo] No stream or video ref for dino
GroupVideoCallSimple.tsx:521 [GroupVideoCallSimple] Connection state for user 4 : connected
useCall.ts:12 [useCall] üî• Context value: {incomingCall: null, activeCall: {‚Ä¶}, hasIncomingCall: false}
2GroupVideoCallSimple.tsx:494 [GroupVideoCallSimple] üîÑ FORCE RE-RENDER participants for user 4
CallContext.tsx:717 [CallContext] Received message: {type: 'group_webrtc_answer', payload: {‚Ä¶}}
CallContext.tsx:848 [CallContext] Forwarding group WebRTC answer: {callId: 'group_call_1752489728775_38_3', answer: {‚Ä¶}, fromUserId: 4}
GroupVideoCallSimple.tsx:181 [GroupVideoCallSimple] Received group WebRTC answer: {callId: 'group_call_1752489728775_38_3', answer: {‚Ä¶}, fromUserId: 4}
GroupVideoCallSimple.tsx:338 [GroupVideoCallSimple] üì• PROCESSING WEBRTC ANSWER from user: 4
GroupVideoCallSimple.tsx:339 [GroupVideoCallSimple] üì• Answer data: {fromUserId: 4, hasAnswer: true, answerType: 'answer', callId: 'group_call_1752489728775_38_3'}
GroupVideoCallSimple.tsx:354 [GroupVideoCallSimple] üîó Peer connection state before setting remote description: {connectionState: 'connected', iceConnectionState: 'connected', signalingState: 'stable'}
GroupVideoCallSimple.tsx:373 [GroupVideoCallSimple] ‚ùå Error processing WebRTC answer from user 4 : InvalidStateError: Failed to execute 'setRemoteDescription' on 'RTCPeerConnection': Failed to set remote answer sdp: Called in wrong state: stable
handleIncomingWebRTCAnswer @ GroupVideoCallSimple.tsx:373
await in handleIncomingWebRTCAnswer
handleGroupWebRTCAnswer @ GroupVideoCallSimple.tsx:183
websocket.onmessage @ CallContext.tsx:849Understand this error
CallContext.tsx:717 [CallContext] Received message: {type: 'group_webrtc_offer', payload: {‚Ä¶}}
CallContext.tsx:841 [CallContext] Forwarding group WebRTC offer: {callId: 'group_call_1752489728775_38_3', offer: {‚Ä¶}, fromUserId: 4}
GroupVideoCallSimple.tsx:175 [GroupVideoCallSimple] Received group WebRTC offer: {callId: 'group_call_1752489728775_38_3', offer: {‚Ä¶}, fromUserId: 4}
GroupVideoCallSimple.tsx:225 [GroupVideoCallSimple] üì• PROCESSING WEBRTC OFFER from user: 4
GroupVideoCallSimple.tsx:226 [GroupVideoCallSimple] üì• Offer data: {fromUserId: 4, hasOffer: true, offerType: 'offer', callId: 'group_call_1752489728775_38_3'}
GroupVideoCallSimple.tsx:271 [GroupVideoCallSimple] üìä Current senders before answer for user 4: 2
GroupVideoCallSimple.tsx:284 [GroupVideoCallSimple] ‚ÑπÔ∏è Tracks already added for answer to user 4
GroupVideoCallSimple.tsx:290 [GroupVideoCallSimple] üîó Peer connection state before setting remote description: {connectionState: 'connected', iceConnectionState: 'connected', signalingState: 'stable'}
GroupVideoCallSimple.tsx:297 [GroupVideoCallSimple] ‚úÖ Set remote description for offer from user: 4
GroupVideoCallSimple.tsx:305 [GroupVideoCallSimple] ‚úÖ Created and set local answer for user: 4
GroupVideoCallSimple.tsx:306 [GroupVideoCallSimple] üì§ Answer details: {type: 'answer', hasAnswer: true}
GroupVideoCallSimple.tsx:322 [GroupVideoCallSimple] üì§ Sent WebRTC answer to user: 4
GroupVideoCallSimple.tsx:327 [GroupVideoCallSimple] üîó Peer connection state after answer: {connectionState: 'connected', iceConnectionState: 'connected', signalingState: 'stable'}