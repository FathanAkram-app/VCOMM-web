[CallContext] Received message: {type: 'incoming_group_call', payload: {…}}
CallContext.tsx:899 [CallContext] Incoming group call received: {callId: 'group_call_1749099274624_37_3', groupId: 37, groupName: 'Alpha', callType: 'video', fromUserId: 3, …}
CallContext.tsx:902 [CallContext] Extracted call details: {callId: 'group_call_1749099274624_37_3', groupId: 37, groupName: 'Alpha', callType: 'video'}
CallContext.tsx:903 [CallContext] Current activeCall: undefined
CallContext.tsx:930 [CallContext] Set incoming group call modal for: Alpha
ChatRoom.tsx:634 Processing message data for grouping: (3) [{…}, {…}, {…}]
ChatRoom.tsx:635 Total messages to process: 3
ChatRoom.tsx:707 Grouped messages: [{…}]
ChatRoom.tsx:708 Total date groups: 1
ChatRoom.tsx:710 Total messages in first group: 3
IncomingCallModal.tsx:8 [IncomingCallModal] Rendering with incomingCall: {callId: 'group_call_1749099274624_37_3', callType: 'video', status: 'ringing', isIncoming: true, peerUserId: 3, …}
CallContext.tsx:412 [CallContext] Received message: {type: 'user_status', payload: {…}}
CallContext.tsx:412 [CallContext] Received message: {type: 'user_status', payload: {…}}
CallContext.tsx:1516 [CallContext] acceptCall function called
CallContext.tsx:1517 [CallContext] incomingCall: {callId: 'group_call_1749099274624_37_3', callType: 'video', status: 'ringing', isIncoming: true, peerUserId: 3, …}
CallContext.tsx:1518 [CallContext] ws connected: true
CallContext.tsx:1519 [CallContext] user: {id: 2, callsign: 'eko', nrp: '12345', fullName: 'eko a', rank: 'SPC', …}
CallContext.tsx:1528 [CallContext] Accepting group call - redirecting to joinGroupCall
CallContext.tsx:2148 [CallContext] Joining existing group call: {callId: 'group_call_1749099274624_37_3', groupId: 37, groupName: 'Alpha', callType: 'video'}
CallContext.tsx:2171 [CallContext] Requesting media permissions for joining group call...
ChatRoom.tsx:634 Processing message data for grouping: (3) [{…}, {…}, {…}]
ChatRoom.tsx:635 Total messages to process: 3
ChatRoom.tsx:707 Grouped messages: [{…}]
ChatRoom.tsx:708 Total date groups: 1
ChatRoom.tsx:710 Total messages in first group: 3
IncomingCallModal.tsx:8 [IncomingCallModal] Rendering with incomingCall: null
CallContext.tsx:2173 [CallContext] Got local media stream for joining group call
CallContext.tsx:2209 [CallContext] Active call state set for group: 37 callId: group_call_1749099274624_37_3
CallContext.tsx:2244 [CallContext] Joined group call successfully
CallContext.tsx:2245 [CallContext] Active call state after joining: {callId: 'group_call_1749099274624_37_3', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
ChatRoom.tsx:634 Processing message data for grouping: (3) [{…}, {…}, {…}]
ChatRoom.tsx:635 Total messages to process: 3
ChatRoom.tsx:707 Grouped messages: [{…}]
ChatRoom.tsx:708 Total date groups: 1
ChatRoom.tsx:710 Total messages in first group: 3
IncomingCallModal.tsx:8 [IncomingCallModal] Rendering with incomingCall: null
GroupVideoCall.tsx:48 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749099274624_37_3', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:49 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:50 [GroupVideoCall] isVideoEnabled: false
GroupVideoCall.tsx:51 [GroupVideoCall] localStream: null
GroupVideoCall.tsx:57 [GroupVideoCall] Getting local media stream...
GroupVideoCall.tsx:123 [GroupVideoCall] Processing participants from activeCall: []
GroupVideoCall.tsx:132 [GroupVideoCall] Other participants: []
GroupVideoCall.tsx:153 [GroupVideoCall] Updated participants list: []
ChatRoom.tsx:634 Processing message data for grouping: (3) [{…}, {…}, {…}]
ChatRoom.tsx:635 Total messages to process: 3
ChatRoom.tsx:707 Grouped messages: [{…}]
ChatRoom.tsx:708 Total date groups: 1
ChatRoom.tsx:710 Total messages in first group: 3
IncomingCallModal.tsx:8 [IncomingCallModal] Rendering with incomingCall: null
GroupVideoCall.tsx:48 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749099274624_37_3', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:49 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:50 [GroupVideoCall] isVideoEnabled: false
GroupVideoCall.tsx:51 [GroupVideoCall] localStream: null
GroupVideoCall.tsx:48 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749099274624_37_3', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:49 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:50 [GroupVideoCall] isVideoEnabled: false
GroupVideoCall.tsx:51 [GroupVideoCall] localStream: null
GroupVideoCall.tsx:63 [GroupVideoCall] Got local media stream: MediaStream {id: 'c0c04ab7-400e-4fc5-a13c-3292b5758389', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
GroupVideoCall.tsx:64 [GroupVideoCall] Video tracks: 1
GroupVideoCall.tsx:65 [GroupVideoCall] Audio tracks: 1
GroupVideoCall.tsx:71 [GroupVideoCall] Video track enabled by default for group calls
GroupVideoCall.tsx:79 [GroupVideoCall] Set local video source
GroupVideoCall.tsx:48 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749099274624_37_3', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:49 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:50 [GroupVideoCall] isVideoEnabled: false
GroupVideoCall.tsx:51 [GroupVideoCall] localStream: MediaStream {id: 'c0c04ab7-400e-4fc5-a13c-3292b5758389', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
GroupVideoCall.tsx:109 [GroupVideoCall] Local video stream attached to element
GroupVideoCall.tsx:115 [GroupVideoCall] Initial video state: true
GroupVideoCall.tsx:48 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749099274624_37_3', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:49 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:50 [GroupVideoCall] isVideoEnabled: true
GroupVideoCall.tsx:51 [GroupVideoCall] localStream: MediaStream {id: 'c0c04ab7-400e-4fc5-a13c-3292b5758389', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
GroupVideoCall.tsx:48 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749099274624_37_3', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:49 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:50 [GroupVideoCall] isVideoEnabled: false
GroupVideoCall.tsx:51 [GroupVideoCall] localStream: null
GroupVideoCall.tsx:92 [GroupVideoCall] useEffect cleanup triggered
GroupVideoCall.tsx:473 [GroupVideoCall] Cleaning up media tracks
GroupVideoCall.tsx:515 [GroupVideoCall] All media cleanup completed
GroupVideoCall.tsx:100 [GroupVideoCall] Component unmounting - final cleanup
GroupVideoCall.tsx:473 [GroupVideoCall] Cleaning up media tracks
GroupVideoCall.tsx:515 [GroupVideoCall] All media cleanup completed
GroupVideoCall.tsx:419 [GroupVideoCall] Component unmounting, cleaning up streams
GroupVideoCall.tsx:473 [GroupVideoCall] Cleaning up media tracks
GroupVideoCall.tsx:515 [GroupVideoCall] All media cleanup completed
GroupVideoCall.tsx:57 [GroupVideoCall] Getting local media stream...
GroupVideoCall.tsx:123 [GroupVideoCall] Processing participants from activeCall: []
GroupVideoCall.tsx:132 [GroupVideoCall] Other participants: []
GroupVideoCall.tsx:153 [GroupVideoCall] Updated participants list: []
GroupVideoCall.tsx:48 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749099274624_37_3', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:49 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:50 [GroupVideoCall] isVideoEnabled: false
GroupVideoCall.tsx:51 [GroupVideoCall] localStream: null
GroupVideoCall.tsx:438 [GroupVideoCall] Available devices: 7
GroupVideoCall.tsx:63 [GroupVideoCall] Got local media stream: MediaStream {id: 'bd88cdbc-1f14-479f-a3ab-f9acd32ce15c', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
GroupVideoCall.tsx:64 [GroupVideoCall] Video tracks: 1
GroupVideoCall.tsx:65 [GroupVideoCall] Audio tracks: 1
GroupVideoCall.tsx:71 [GroupVideoCall] Video track enabled by default for group calls
GroupVideoCall.tsx:79 [GroupVideoCall] Set local video source
GroupVideoCall.tsx:48 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749099274624_37_3', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:49 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:50 [GroupVideoCall] isVideoEnabled: false
GroupVideoCall.tsx:51 [GroupVideoCall] localStream: MediaStream {id: 'bd88cdbc-1f14-479f-a3ab-f9acd32ce15c', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
CallContext.tsx:412 [CallContext] Received message: {type: 'group_call_participants_update', payload: {…}}
CallContext.tsx:999 [CallContext] Group call participants update: {type: 'group_call_participants_update', payload: {…}}
CallContext.tsx:1004 [CallContext] Comparing callIds - message: group_call_1749099274624_37_3 activeCall: group_call_1749099274624_37_3
CallContext.tsx:1005 [CallContext] ActiveCall groupId: 37
CallContext.tsx:1044 [CallContext] Extracted groupIds - message: 37 active: 37
CallContext.tsx:1045 [CallContext] CallId parts: (5) ['group', 'call', '1749099274624', '37', '3']
CallContext.tsx:1048 [CallContext] Group IDs match, updating participants: (2) [3, 2]
CallContext.tsx:1052 [CallContext] Unique participants after deduplication: (2) [3, 2]
CallContext.tsx:1070 [CallContext] Updated participants in active call: (2) [3, 2]
GroupVideoCall.tsx:109 [GroupVideoCall] Local video stream attached to element
GroupVideoCall.tsx:115 [GroupVideoCall] Initial video state: true
GroupVideoCall.tsx:48 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749099274624_37_3', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:49 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:50 [GroupVideoCall] isVideoEnabled: true
GroupVideoCall.tsx:51 [GroupVideoCall] localStream: MediaStream {id: 'bd88cdbc-1f14-479f-a3ab-f9acd32ce15c', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
GroupVideoCall.tsx:92 [GroupVideoCall] useEffect cleanup triggered
GroupVideoCall.tsx:473 [GroupVideoCall] Cleaning up media tracks
GroupVideoCall.tsx:489 [GroupVideoCall] Clearing video element
GroupVideoCall.tsx:493 [GroupVideoCall] Cleared and reloaded video element
GroupVideoCall.tsx:515 [GroupVideoCall] All media cleanup completed
GroupVideoCall.tsx:57 [GroupVideoCall] Getting local media stream...
GroupVideoCall.tsx:123 [GroupVideoCall] Processing participants from activeCall: (2) [{…}, {…}]
GroupVideoCall.tsx:132 [GroupVideoCall] Other participants: [{…}]
GroupVideoCall.tsx:153 [GroupVideoCall] Updated participants list: [{…}]
GroupVideoCall.tsx:48 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749099274624_37_3', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:49 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:50 [GroupVideoCall] isVideoEnabled: false
GroupVideoCall.tsx:51 [GroupVideoCall] localStream: null
GroupVideoCall.tsx:63 [GroupVideoCall] Got local media stream: MediaStream {id: 'df1c8e31-5e94-490c-9dee-d9601842db42', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
GroupVideoCall.tsx:64 [GroupVideoCall] Video tracks: 1
GroupVideoCall.tsx:65 [GroupVideoCall] Audio tracks: 1
GroupVideoCall.tsx:71 [GroupVideoCall] Video track enabled by default for group calls
GroupVideoCall.tsx:79 [GroupVideoCall] Set local video source
GroupVideoCall.tsx:48 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749099274624_37_3', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:49 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:50 [GroupVideoCall] isVideoEnabled: false
GroupVideoCall.tsx:51 [GroupVideoCall] localStream: MediaStream {id: 'df1c8e31-5e94-490c-9dee-d9601842db42', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
GroupVideoCall.tsx:109 [GroupVideoCall] Local video stream attached to element
GroupVideoCall.tsx:115 [GroupVideoCall] Initial video state: true
GroupVideoCall.tsx:160 [GroupVideoCall] Setting up WebRTC connections for participants: [3]
GroupVideoCall.tsx:164 [GroupVideoCall] Creating peer connection for user: 3
GroupVideoCall.tsx:176 [GroupVideoCall] Adding local track to peer connection: audio
GroupVideoCall.tsx:176 [GroupVideoCall] Adding local track to peer connection: video
GroupVideoCall.tsx:277 [GroupVideoCall] Auto-initiating WebRTC connections for all participants
GroupVideoCall.tsx:282 [GroupVideoCall] Auto-creating offer for participant: 3
GroupVideoCall.tsx:48 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749099274624_37_3', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:49 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:50 [GroupVideoCall] isVideoEnabled: true
GroupVideoCall.tsx:51 [GroupVideoCall] localStream: MediaStream {id: 'df1c8e31-5e94-490c-9dee-d9601842db42', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
GroupVideoCall.tsx:238 [GroupVideoCall] Sending offer to user: 3
4GroupVideoCall.tsx:208 [GroupVideoCall] Sending ICE candidate to user: 3
GroupVideoCall.tsx:48 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749099274624_37_3', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:49 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:50 [GroupVideoCall] isVideoEnabled: true
GroupVideoCall.tsx:51 [GroupVideoCall] localStream: MediaStream {id: 'df1c8e31-5e94-490c-9dee-d9601842db42', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
CallContext.tsx:380 [CallContext] Creating stable WebSocket for calls...
2GroupVideoCall.tsx:208 [GroupVideoCall] Sending ICE candidate to user: 3
CallContext.tsx:475 [CallContext] WebSocket disconnected
GroupVideoCall.tsx:48 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749099274624_37_3', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:49 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:50 [GroupVideoCall] isVideoEnabled: true
GroupVideoCall.tsx:51 [GroupVideoCall] localStream: MediaStream {id: 'df1c8e31-5e94-490c-9dee-d9601842db42', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
CallContext.tsx:387 [CallContext] WebSocket connected successfully for calls
CallContext.tsx:398 [CallContext] Authenticated user 2 with WebSocket
GroupVideoCall.tsx:48 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749099274624_37_3', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:49 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:50 [GroupVideoCall] isVideoEnabled: true
GroupVideoCall.tsx:51 [GroupVideoCall] localStream: MediaStream {id: 'df1c8e31-5e94-490c-9dee-d9601842db42', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
CallContext.tsx:412 [CallContext] Received message: {type: 'user_status', payload: {…}}
GroupVideoCall.tsx:292 [GroupVideoCall] Auto-sending offer to participant: 3