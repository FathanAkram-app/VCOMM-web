[CallContext] Starting audio call to: dani
CallContext.tsx:11 [CallContext] Mobile compatibility check: {isMobile: false, isHTTPS: true, userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', hasMediaDevices: ƒ}
CallContext.tsx:922 [CallContext] Requesting media permissions with mobile-optimized constraints: {audio: true}
CallContext.tsx:923 [CallContext] Device info: {isMobile: false, isHTTPS: true, hasMediaDevices: ƒ}
CallContext.tsx:936 [CallContext] ✅ Successfully got media stream: {audioTracks: 1, videoTracks: 0}
ChatRoom.tsx:634 Processing message data for grouping: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
ChatRoom.tsx:635 Total messages to process: 6
ChatRoom.tsx:707 Grouped messages: (2) [{…}, {…}]
ChatRoom.tsx:708 Total date groups: 2
ChatRoom.tsx:710 Total messages in first group: 3
IncomingCallModal.tsx:8 [IncomingCallModal] Rendering with incomingCall: null
AudioCall.tsx:10 [AudioCall] Component rendering with activeCall: {callId: 'call_1748874224224_1_2', callType: 'audio', status: 'calling', isIncoming: false, peerUserId: 2, …}
AudioCall.tsx:11 [AudioCall] remoteAudioStream: null
AudioCall.tsx:15 [AudioCall] Remote stream effect triggered, remoteAudioStream: null
AudioCall.tsx:17 [AudioCall] ❌ No remote audio stream available, waiting for stream...
AudioCall.tsx:10 [AudioCall] Component rendering with activeCall: {callId: 'call_1748874224224_1_2', callType: 'audio', status: 'calling', isIncoming: false, peerUserId: 2, …}
AudioCall.tsx:11 [AudioCall] remoteAudioStream: null
CallContext.tsx:195 [CallContext] Creating stable WebSocket for calls...
CallContext.tsx:262 [CallContext] WebSocket disconnected
AudioCall.tsx:10 [AudioCall] Component rendering with activeCall: {callId: 'call_1748874224224_1_2', callType: 'audio', status: 'calling', isIncoming: false, peerUserId: 2, …}
AudioCall.tsx:11 [AudioCall] remoteAudioStream: null
CallContext.tsx:202 [CallContext] WebSocket connected successfully for calls
CallContext.tsx:213 [CallContext] Authenticated user 1 with WebSocket
AudioCall.tsx:10 [AudioCall] Component rendering with activeCall: {callId: 'call_1748874224224_1_2', callType: 'audio', status: 'calling', isIncoming: false, peerUserId: 2, …}
AudioCall.tsx:11 [AudioCall] remoteAudioStream: null
CallContext.tsx:227 [CallContext] Received message: {type: 'user_status', payload: {…}}
CallContext.tsx:227 [CallContext] Received message: {type: 'call_accepted', payload: {…}}
CallContext.tsx:496 [CallContext] Call accepted, payload: {callId: 'call_1748874224224_1_2'}
CallContext.tsx:497 [CallContext] Current activeCall (state): {callId: 'call_1748874224224_1_2', callType: 'audio', status: 'calling', isIncoming: false, peerUserId: 2, …}
CallContext.tsx:498 [CallContext] Current activeCall (ref): {callId: 'call_1748874224224_1_2', callType: 'audio', status: 'calling', isIncoming: false, peerUserId: 2, …}
CallContext.tsx:499 [CallContext] Current incomingCall: null
CallContext.tsx:505 [CallContext] Updating call status to connected
CallContext.tsx:508 [CallContext] Stopping ALL ringtone sources - call accepted
CallContext.tsx:518 [CallContext] ✅ HTML5 ringtone force stopped
CallContext.tsx:569 [CallContext] Waiting for receiver to be ready for WebRTC...
AudioCall.tsx:10 [AudioCall] Component rendering with activeCall: {callId: 'call_1748874224224_1_2', callType: 'audio', status: 'connected', isIncoming: false, peerUserId: 2, …}
AudioCall.tsx:11 [AudioCall] remoteAudioStream: null
AudioCall.tsx:141 [AudioCall] Setting up call duration timer
CallContext.tsx:227 [CallContext] Received message: {type: 'webrtc_ready', payload: {…}}
CallContext.tsx:605 [CallContext] Received WebRTC ready signal, payload: {callId: 'call_1748874224224_1_2'}
CallContext.tsx:606 [CallContext] Current activeCall (state): {callId: 'call_1748874224224_1_2', callType: 'audio', status: 'calling', isIncoming: false, peerUserId: 2, …}
CallContext.tsx:607 [CallContext] Current activeCall (ref): {callId: 'call_1748874224224_1_2', callType: 'audio', status: 'connected', isIncoming: false, peerUserId: 2, …}
CallContext.tsx:613 [CallContext] ✅ Found activeCall and peerConnection for WebRTC ready
CallContext.tsx:619 [CallContext] ✅ Cleared fallback timeout - received ready signal
CallContext.tsx:624 [CallContext] Creating WebRTC offer after receiver ready...
CallContext.tsx:627 [CallContext] Local description set successfully
CallContext.tsx:640 [CallContext] ⚠️ WebSocket not ready, using HTTP API fallback
CallContext.tsx:657 [CallContext] ✅ Sent WebRTC offer via HTTP API fallback
AudioCall.tsx:10 [AudioCall] Component rendering with activeCall: {callId: 'call_1748874224224_1_2', callType: 'audio', status: 'connected', isIncoming: false, peerUserId: 2, …}
AudioCall.tsx:11 [AudioCall] remoteAudioStream: null
AudioCall.tsx:10 [AudioCall] Component rendering with activeCall: {callId: 'call_1748874224224_1_2', callType: 'audio', status: 'connected', isIncoming: false, peerUserId: 2, …}
AudioCall.tsx:11 [AudioCall] remoteAudioStream: null
AudioCall.tsx:10 [AudioCall] Component rendering with activeCall: {callId: 'call_1748874224224_1_2', callType: 'audio', status: 'connected', isIncoming: false, peerUserId: 2, …}
AudioCall.tsx:11 [AudioCall] remoteAudioStream: null
AudioCall.tsx:10 [AudioCall] Component rendering with activeCall: {callId: 'call_1748874224224_1_2', callType: 'audio', status: 'connected', isIncoming: false, peerUserId: 2, …}
AudioCall.tsx:11 [AudioCall] remoteAudioStream: null
AudioCall.tsx:10 [AudioCall] Component rendering with activeCall: {callId: 'call_1748874224224_1_2', callType: 'audio', status: 'connected', isIncoming: false, peerUserId: 2, …}
AudioCall.tsx:11 [AudioCall] remoteAudioStream: null