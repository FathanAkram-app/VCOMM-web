[CallContext] Removed processed offer, remaining pending: 0
CallContext.tsx:4621 [CallContext] ğŸ”¥ INCOMING CALL STATE CHANGED: {callId: 'call_1757926150723_3_2', callType: 'video', status: 'ringing', isIncoming: true, peerUserId: 3,Â â€¦}
CallContext.tsx:4623 [CallContext] ğŸ”¥ INCOMING CALL DETAILS: {callId: 'call_1757926150723_3_2', groupName: undefined, callType: 'video', isGroupCall: undefined}
CallContext.tsx:3272 [CallContext] acceptCall function called
CallContext.tsx:3273 [CallContext] incomingCall: {callId: 'call_1757926150723_3_2', callType: 'video', status: 'ringing', isIncoming: true, peerUserId: 3,Â â€¦}
CallContext.tsx:3274 [CallContext] ws connected: true
CallContext.tsx:3275 [CallContext] user: {id: 2, callsign: 'eko', nrp: '12345', fullName: 'eko a', rank: 'SPC',Â â€¦}
CallContext.tsx:3295 [CallContext] Accepting call
CallContext.tsx:3298 [CallContext] ğŸ”‡ FORCE STOPPING ALL RINGTONES - Call accepted
CallContext.tsx:734 [CallContext] ğŸ”‡ STOPPING ALL RINGTONES - comprehensive cleanup
CallContext.tsx:739 [CallContext] Stopping HTML5 ringtone audio
CallContext.tsx:748 [CallContext] âœ… HTML5 ringtone stopped and cleared
CallContext.tsx:757 [CallContext] Force stopping current global ringtone
CallContext.tsx:765 [CallContext] âœ… Global ringtone reference stopped
CallContext.tsx:789 [CallContext] âœ… Stopped 0 audio elements
CallContext.tsx:833 [CallContext] âœ… RINGTONE CLEANUP COMPLETED
CallContext.tsx:3324 [CallContext] Requesting media permissions for mobile (accept call)...
CallContext.tsx:4633 [CallContext] ğŸ”¥ PROVIDER VALUE UPDATE: {incomingCall: {â€¦}, activeCall: null, hasIncomingCall: true, incomingCallId: 'call_1757926150723_3_2'}
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: {â€¦}, activeCall: null, hasIncomingCall: true}
IncomingCallModal.tsx:6 [IncomingCallModal] ğŸ”¥ COMPONENT RENDERED - START
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: {â€¦}, activeCall: null, hasIncomingCall: true}
IncomingCallModal.tsx:11 [IncomingCallModal] ğŸ”¥ After useCall hook - incomingCall: {callId: 'call_1757926150723_3_2', callType: 'video', status: 'ringing', isIncoming: true, peerUserId: 3,Â â€¦}
IncomingCallModal.tsx:12 [IncomingCallModal] ğŸ”¥ incomingCall type check: object
IncomingCallModal.tsx:13 [IncomingCallModal] ğŸ”¥ incomingCall falsy check: false
IncomingCallModal.tsx:20 [IncomingCallModal] âœ… SHOWING MODAL for call: call_1757926150723_3_2
IncomingCallModal.tsx:21 [IncomingCallModal] Modal details: {isGroupCall: undefined, groupName: undefined, callType: 'video', fromUser: 'aji'}
CallContext.tsx:3326 [CallContext] Got local media stream for incoming call
CallContext.tsx:3339 [CallContext] Added local stream to existing peerConnection
CallContext.tsx:3378 [CallContext] ğŸ¯ Call accepted - enabling audio and activating remote stream
CallContext.tsx:4633 [CallContext] ğŸ”¥ PROVIDER VALUE UPDATE: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false, incomingCallId: undefined}
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
IncomingCallModal.tsx:6 [IncomingCallModal] ğŸ”¥ COMPONENT RENDERED - START
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
IncomingCallModal.tsx:11 [IncomingCallModal] ğŸ”¥ After useCall hook - incomingCall: null
IncomingCallModal.tsx:12 [IncomingCallModal] ğŸ”¥ incomingCall type check: object
IncomingCallModal.tsx:13 [IncomingCallModal] ğŸ”¥ incomingCall falsy check: true
IncomingCallModal.tsx:16 [IncomingCallModal] No incoming call, returning null
CallContext.tsx:4621 [CallContext] ğŸ”¥ INCOMING CALL STATE CHANGED: null
CallContext.tsx:4633 [CallContext] ğŸ”¥ PROVIDER VALUE UPDATE: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false, incomingCallId: undefined}
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
VideoCall.tsx:19 [VideoCall] Component rendering with activeCall: {callId: 'call_1757926150723_3_2', callType: 'video', status: 'connected', isIncoming: true, peerUserId: 3,Â â€¦}
ChatList.tsx:149 ğŸ“‹ CHATLIST: Removing WebSocket event listeners
VideoCall.tsx:23 [VideoCall] Local stream changed: MediaStreamÂ {id: '90228227-c386-4a25-9bee-b8488616c5e4', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
VideoCall.tsx:26 [VideoCall] Local stream attached to video element
VideoCall.tsx:32 [VideoCall] Remote stream changed: null
VideoCall.tsx:84 [VideoCall] â³ Waiting for remote stream...
VideoCall.tsx:92 [VideoCall] ğŸ• Resilient timer check - activeCall: true status: connected startTime: Mon Sep 15 2025 15:49:21 GMT+0700 (Western Indonesia Time)
VideoCall.tsx:103 [VideoCall] ğŸ• STARTING RESILIENT TIMER for callId: call_1757926150723_3_2 startTime: Mon Sep 15 2025 15:49:21 GMT+0700 (Western Indonesia Time)
VideoCall.tsx:117 [VideoCall] ğŸ• RESILIENT TICK: 00:00:00 elapsed ms: 118
VideoCall.tsx:129 [VideoCall] ğŸ• Resilient timer interval created: 25
CallContext.tsx:17 [ProtectedIntervals] ğŸ›¡ï¸ Protected interval: 25 Set size: 1
VideoCall.tsx:153 [VideoCall] ğŸ• WATCHDOG: Starting timer health monitor
CallContext.tsx:3444 [CallContext] ğŸ“¤ Sending WebRTC ready signal to caller: 3
CallContext.tsx:3452 [CallContext] âœ… WebRTC ready signal sent successfully
VideoCall.tsx:117 [VideoCall] ğŸ• RESILIENT TICK: 00:00:01 elapsed ms: 1120
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
VideoCall.tsx:19 [VideoCall] Component rendering with activeCall: {callId: 'call_1757926150723_3_2', callType: 'video', status: 'connected', isIncoming: true, peerUserId: 3,Â â€¦}
CallContext.tsx:1156 [CallContext] Received message: {type: 'webrtc_offer', callId: 'call_1757926150723_3_2', offer: {â€¦}}
CallContext.tsx:1159 [CallContext] ğŸ” DEBUG MESSAGE ROUTING: {messageType: 'webrtc_offer', hasPayload: false, messageKeys: Array(3), routingToCase: 'webrtc_offer'}
CallContext.tsx:1287 [CallContext] ğŸ¯ Processing webrtc_offer message: {type: 'webrtc_offer', callId: 'call_1757926150723_3_2', offer: {â€¦}}
CallContext.tsx:2686 [CallContext] ğŸ”„ ENHANCED: Received WebRTC offer for callId: call_1757926150723_3_2
CallContext.tsx:2693 [CallContext] Current activeCall: call_1757926150723_3_2
CallContext.tsx:2694 [CallContext] Current incomingCall: undefined
CallContext.tsx:2695 [CallContext] Looking for callId: call_1757926150723_3_2
CallContext.tsx:2713 [CallContext] ğŸ”„ ENHANCED: Processing WebRTC offer with improved validation...
CallContext.tsx:2716 [CallContext] ğŸ“Š Pre-offer transceiver validation:
CallContext.tsx:2719 [CallContext] Transceiver 0: {direction: 'sendrecv', currentDirection: null, mid: null, sender: {â€¦}, receiver: {â€¦}}
CallContext.tsx:2719 [CallContext] Transceiver 1: {direction: 'sendrecv', currentDirection: null, mid: null, sender: {â€¦}, receiver: {â€¦}}
CallContext.tsx:3343 [CallContext] ğŸ“¡ RECEIVER: Received remote stream
CallContext.tsx:3345 [CallContext] ğŸ“¡ RECEIVER: Remote stream details: {id: '3c4ee48d-7881-4035-bc03-0974467b9b4e', active: true, audioTracks: 1, videoTracks: 1}
CallContext.tsx:3353 [CallContext] ğŸ“¡ RECEIVER: Storing remote stream globally
CallContext.tsx:3357 [CallContext] Remote audio received - stopping waiting tone
CallContext.tsx:911 [CallContext] ğŸ”‡ AGGRESSIVE AUDIO CLEANUP - STOPPING ALL AUDIO
CallContext.tsx:945 [CallContext] ğŸ’¥ NUCLEAR AUDIO CLEANUP - Closing ALL AudioContext instances
CallContext.tsx:961 [CallContext] âœ… Closed AudioContext
CallContext.tsx:992 [CallContext] ğŸ›¡ï¸ SKIPPING nuclear cleanup - call is connected, preserving timers
CallContext.tsx:3343 [CallContext] ğŸ“¡ RECEIVER: Received remote stream
CallContext.tsx:3345 [CallContext] ğŸ“¡ RECEIVER: Remote stream details: {id: '3c4ee48d-7881-4035-bc03-0974467b9b4e', active: true, audioTracks: 1, videoTracks: 1}
CallContext.tsx:3353 [CallContext] ğŸ“¡ RECEIVER: Storing remote stream globally
CallContext.tsx:3357 [CallContext] Remote audio received - stopping waiting tone
CallContext.tsx:911 [CallContext] ğŸ”‡ AGGRESSIVE AUDIO CLEANUP - STOPPING ALL AUDIO
CallContext.tsx:945 [CallContext] ğŸ’¥ NUCLEAR AUDIO CLEANUP - Closing ALL AudioContext instances
CallContext.tsx:961 [CallContext] âœ… Closed AudioContext
CallContext.tsx:992 [CallContext] ğŸ›¡ï¸ SKIPPING nuclear cleanup - call is connected, preserving timers
CallContext.tsx:2755 [CallContext] âœ… ENHANCED: Remote description set successfully
CallContext.tsx:2758 [CallContext] ğŸ“Š RECEIVER: Post-offer transceiver validation with direction enforcement:
CallContext.tsx:2767 [CallContext] RECEIVER: Transceiver 0: {direction: 'sendrecv', currentDirection: null, mid: '0', kind: 'audio', receiverTrack: {â€¦}}
CallContext.tsx:2798 [CallContext] âœ… RECEIVER: Proper audio receiver transceiver validated
CallContext.tsx:2767 [CallContext] RECEIVER: Transceiver 1: {direction: 'sendrecv', currentDirection: null, mid: '1', kind: 'video', receiverTrack: {â€¦}}
CallContext.tsx:2809 [CallContext] ğŸ”§ RECEIVER: Implementing receiver track validation and auto-repair...
CallContext.tsx:2814 [CallContext] ğŸ“Š RECEIVER: Audio receiver track state: {id: '7cacb06b-cf49-4f6e-a0f7-6961c05e2472', enabled: true, muted: false, readyState: 'live'}
CallContext.tsx:2856 [CallContext] âœ… RECEIVER: Audio receiver track force-enabled for RTP processing
CallContext.tsx:2862 [CallContext] Processing 2 pending ICE candidates for callId: call_1757926150723_3_2
CallContext.tsx:4633 [CallContext] ğŸ”¥ PROVIDER VALUE UPDATE: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false, incomingCallId: undefined}
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
VideoCall.tsx:19 [VideoCall] Component rendering with activeCall: {callId: 'call_1757926150723_3_2', callType: 'video', status: 'connected', isIncoming: true, peerUserId: 3,Â â€¦}
VideoCall.tsx:32 [VideoCall] Remote stream changed: MediaStreamÂ {id: '3c4ee48d-7881-4035-bc03-0974467b9b4e', active: true, onaddtrack: null, onremovetrack: null, onactive: null,Â â€¦}
VideoCall.tsx:34 [VideoCall] âœ… Setting remote stream to video element
VideoCall.tsx:35 [VideoCall] Remote stream details: {id: '3c4ee48d-7881-4035-bc03-0974467b9b4e', active: true, audioTracks: 1, videoTracks: 1}
VideoCall.tsx:44 [VideoCall] Track 0: {kind: 'audio', enabled: true, muted: false, readyState: 'live', id: '7cacb06b-cf49-4f6e-a0f7-6961c05e2472'}
VideoCall.tsx:44 [VideoCall] Track 1: {kind: 'video', enabled: true, muted: false, readyState: 'live', id: '6ab20381-ff27-482e-99a7-d19f1c8995e4'}
2CallContext.tsx:2866 [CallContext] âœ… Added pending ICE candidate
CallContext.tsx:2876 [CallContext] ğŸ”„ RECEIVER: Starting enhanced RTP flow monitoring for receiver side
CallContext.tsx:359 [CallContext] ğŸ”„ RECEIVER: Starting enhanced receiver-side RTP monitoring for callId: call_1757926150723_3_2
CallContext.tsx:459 [CallContext] âš ï¸ RECEIVER: Issues detected: ['No RTP data flow (warning count: 1)']
checkReceiverRTPFlow @ CallContext.tsx:459
await in checkReceiverRTPFlow
startReceiverRTPMonitoring @ CallContext.tsx:476
handleWebRTCOffer @ CallContext.tsx:2877
await in handleWebRTCOffer
websocket.onmessage @ CallContext.tsx:1288Understand this warning
CallContext.tsx:460 [CallContext] ğŸ”§ RECEIVER: Transport state: {connectionState: 'new', iceConnectionState: 'new', signalingState: 'have-remote-offer'}
checkReceiverRTPFlow @ CallContext.tsx:460
await in checkReceiverRTPFlow
startReceiverRTPMonitoring @ CallContext.tsx:476
handleWebRTCOffer @ CallContext.tsx:2877
await in handleWebRTCOffer
websocket.onmessage @ CallContext.tsx:1288Understand this warning
CallContext.tsx:2881 [CallContext] âœ… ENHANCED: Local description (answer) set successfully
CallContext.tsx:2892 [CallContext] âš ï¸ WebSocket not ready for answer, using HTTP API fallback
2CallContext.tsx:3372 [CallContext] âŒ RECEIVER: Remote audio element not found
CallContext.tsx:2909 [CallContext] âœ… Sent WebRTC answer via HTTP API fallback
VideoCall.tsx:63 [VideoCall] âœ… Remote video playing successfully with audio
VideoCall.tsx:117 [VideoCall] ğŸ• RESILIENT TICK: 00:00:02 elapsed ms: 2119
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
VideoCall.tsx:19 [VideoCall] Component rendering with activeCall: {callId: 'call_1757926150723_3_2', callType: 'video', status: 'connected', isIncoming: true, peerUserId: 3,Â â€¦}
VideoCall.tsx:159 [VideoCall] ğŸ• WATCHDOG: Check - timeSinceLastTick: 2ms
VideoCall.tsx:117 [VideoCall] ğŸ• RESILIENT TICK: 00:00:03 elapsed ms: 3120
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
VideoCall.tsx:19 [VideoCall] Component rendering with activeCall: {callId: 'call_1757926150723_3_2', callType: 'video', status: 'connected', isIncoming: true, peerUserId: 3,Â â€¦}
CallContext.tsx:390 [CallContext] ğŸ“Š RECEIVER: Inbound RTP monitoring: {callId: 'call_1757926150723_3_2', bytesReceived: 2871, bytesDelta: 2871, packetsReceived: 81, packetsDelta: 81,Â â€¦}
CallContext.tsx:409 [CallContext] âœ… RECEIVER: RTP data flow detected - receiver working correctly!
CallContext.tsx:1156 [CallContext] Received message: {type: 'call_ended', payload: {â€¦}}
CallContext.tsx:1159 [CallContext] ğŸ” DEBUG MESSAGE ROUTING: {messageType: 'call_ended', hasPayload: true, messageKeys: Array(2), routingToCase: 'call_ended'}
CallContext.tsx:2547 [CallContext] âŒ Call ended unexpectedly, payload: {callId: 'call_1757926150723_3_2'}
CallContext.tsx:2548 [CallContext] Current activeCall status: undefined
CallContext.tsx:2549 [CallContext] Current incomingCall status: undefined
CallContext.tsx:2553 [CallContext] ğŸ” Extracted callId: call_1757926150723_3_2
CallContext.tsx:2561 [CallContext] FORCE STOPPING ALL RINGTONES - call ended
CallContext.tsx:911 [CallContext] ğŸ”‡ AGGRESSIVE AUDIO CLEANUP - STOPPING ALL AUDIO
CallContext.tsx:945 [CallContext] ğŸ’¥ NUCLEAR AUDIO CLEANUP - Closing ALL AudioContext instances
CallContext.tsx:961 [CallContext] âœ… Closed AudioContext
CallContext.tsx:992 [CallContext] ğŸ›¡ï¸ SKIPPING nuclear cleanup - call is connected, preserving timers
CallContext.tsx:2583 [CallContext] Stopping ALL ringtone sources - call ended
CallContext.tsx:2647 [CallContext] âš ï¸ Call ended event for non-active call: call_1757926150723_3_2 current activeCall: undefined
CallContext.tsx:2651 [CallContext] ğŸ” DEBUG: Current location: /chat
CallContext.tsx:2652 [CallContext] ğŸ” DEBUG: Checking if on call page for navigation...
CallContext.tsx:2658 [CallContext] ğŸ” DEBUG: Not on call page, current location: /chat
CallContext.tsx:2681 [CallContext] âš ï¸ Call ended event does not match incoming call, or no incoming call exists
VideoCall.tsx:117 [VideoCall] ğŸ• RESILIENT TICK: 00:00:04 elapsed ms: 4122
VideoCall.tsx:159 [VideoCall] ğŸ• WATCHDOG: Check - timeSinceLastTick: 0ms
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
VideoCall.tsx:19 [VideoCall] Component rendering with activeCall: {callId: 'call_1757926150723_3_2', callType: 'video', status: 'connected', isIncoming: true, peerUserId: 3,Â â€¦}
CallContext.tsx:1156 [CallContext] Received message: {type: 'user_status', payload: {â€¦}}
CallContext.tsx:1159 [CallContext] ğŸ” DEBUG MESSAGE ROUTING: {messageType: 'user_status', hasPayload: true, messageKeys: Array(2), routingToCase: 'user_status'}
CallContext.tsx:1223 [CallContext] Received user status update: {userId: 3, status: 'offline'}
VideoCall.tsx:117 [VideoCall] ğŸ• RESILIENT TICK: 00:00:05 elapsed ms: 5120
useCall.ts:12 [useCall] ğŸ”¥ Context value: {incomingCall: null, activeCall: {â€¦}, hasIncomingCall: false}
VideoCall.tsx:19 [VideoCall] Component rendering with activeCall: {callId: 'call_1757926150723_3_2', callType: 'video', status: 'connected', isIncoming: true, peerUserId: 3,Â â€¦}
CallContext.tsx:1156 [CallContext] Received message: {type: 'user_status', payload: {â€¦}}
CallContext.tsx:1159 [CallContext] ğŸ” DEBUG MESSAGE ROUTING: {messageType: 'user_status', hasPayload: true, messageKeys: Array(2), routingToCase: 'user_status'}
CallContext.tsx:1223 [CallContext] Received user status update: {userId: 3, status: 'online'}
CallContext.tsx:390 [CallContext] ğŸ“Š RECEIVER: Inbound RTP monitoring: {callId: 'call_1757926150723_3_2', bytesReceived: 3332, bytesDelta: 461, packetsReceived: 94, packetsDelta: 13,Â â€¦}
VideoCall.tsx:117 [VideoCall] ğŸ• RESILIENT TICK: 00:00:06 elapsed ms: 6130