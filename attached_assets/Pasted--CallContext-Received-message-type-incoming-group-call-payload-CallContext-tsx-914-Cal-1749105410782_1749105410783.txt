[CallContext] Received message: {type: 'incoming_group_call', payload: {…}}
CallContext.tsx:914 [CallContext] Incoming group call received: {callId: 'group_call_1749105382250_37_5', groupId: 37, groupName: 'Alpha', callType: 'video', fromUserId: 5, …}
CallContext.tsx:917 [CallContext] Extracted call details: {callId: 'group_call_1749105382250_37_5', groupId: 37, groupName: 'Alpha', callType: 'video'}
CallContext.tsx:918 [CallContext] Current activeCall: undefined
CallContext.tsx:945 [CallContext] Set incoming group call modal for: Alpha
IncomingCallModal.tsx:8 [IncomingCallModal] Rendering with incomingCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'ringing', isIncoming: true, peerUserId: 5, …}
CallContext.tsx:420 [CallContext] Received message: {type: 'user_status', payload: {…}}
CallContext.tsx:420 [CallContext] Received message: {type: 'user_status', payload: {…}}
CallContext.tsx:1531 [CallContext] acceptCall function called
CallContext.tsx:1532 [CallContext] incomingCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'ringing', isIncoming: true, peerUserId: 5, …}
CallContext.tsx:1533 [CallContext] ws connected: true
CallContext.tsx:1534 [CallContext] user: {id: 2, callsign: 'eko', nrp: '12345', fullName: 'eko a', rank: 'SPC', …}
CallContext.tsx:1543 [CallContext] Accepting group call - redirecting to joinGroupCall
CallContext.tsx:2163 [CallContext] Joining existing group call: {callId: 'group_call_1749105382250_37_5', groupId: 37, groupName: 'Alpha', callType: 'video'}
CallContext.tsx:2186 [CallContext] Requesting media permissions for joining group call...
IncomingCallModal.tsx:8 [IncomingCallModal] Rendering with incomingCall: null
CallContext.tsx:2188 [CallContext] Got local media stream for joining group call
CallContext.tsx:2224 [CallContext] Active call state set for group: 37 callId: group_call_1749105382250_37_5
CallContext.tsx:2259 [CallContext] Joined group call successfully
CallContext.tsx:2260 [CallContext] Active call state after joining: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
IncomingCallModal.tsx:8 [IncomingCallModal] Rendering with incomingCall: null
GroupVideoCall.tsx:111 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:112 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:113 [GroupVideoCall] isVideoEnabled: false
GroupVideoCall.tsx:114 [GroupVideoCall] localStream: null
GroupVideoCall.tsx:120 [GroupVideoCall] Getting local media stream...
GroupVideoCall.tsx:160 [GroupVideoCall] Processing participants from activeCall: 0
GroupVideoCall.tsx:171 [GroupVideoCall] Unique participants created: 0
IncomingCallModal.tsx:8 [IncomingCallModal] Rendering with incomingCall: null
GroupVideoCall.tsx:111 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:112 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:113 [GroupVideoCall] isVideoEnabled: false
GroupVideoCall.tsx:114 [GroupVideoCall] localStream: null
GroupVideoCall.tsx:111 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:112 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:113 [GroupVideoCall] isVideoEnabled: false
GroupVideoCall.tsx:114 [GroupVideoCall] localStream: null
GroupVideoCall.tsx:126 [GroupVideoCall] Got local media stream: MediaStream {id: '8c56ce35-cc57-4458-9ce6-80761626d203', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
GroupVideoCall.tsx:127 [GroupVideoCall] Video tracks: 1
GroupVideoCall.tsx:128 [GroupVideoCall] Audio tracks: 1
GroupVideoCall.tsx:111 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:112 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:113 [GroupVideoCall] isVideoEnabled: true
GroupVideoCall.tsx:114 [GroupVideoCall] localStream: MediaStream {id: '8c56ce35-cc57-4458-9ce6-80761626d203', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
GroupVideoCall.tsx:160 [GroupVideoCall] Processing participants from activeCall: 0
GroupVideoCall.tsx:171 [GroupVideoCall] Unique participants created: 0
GroupVideoCall.tsx:111 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:112 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:113 [GroupVideoCall] isVideoEnabled: true
GroupVideoCall.tsx:114 [GroupVideoCall] localStream: MediaStream {id: '8c56ce35-cc57-4458-9ce6-80761626d203', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
GroupVideoCall.tsx:140 [GroupVideoCall] Local video element configured
GroupVideoCall.tsx:111 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:112 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:113 [GroupVideoCall] isVideoEnabled: false
GroupVideoCall.tsx:114 [GroupVideoCall] localStream: null
GroupVideoCall.tsx:120 [GroupVideoCall] Getting local media stream...
GroupVideoCall.tsx:160 [GroupVideoCall] Processing participants from activeCall: 0
GroupVideoCall.tsx:171 [GroupVideoCall] Unique participants created: 0
GroupVideoCall.tsx:111 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:112 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:113 [GroupVideoCall] isVideoEnabled: false
GroupVideoCall.tsx:114 [GroupVideoCall] localStream: null
GroupVideoCall.tsx:126 [GroupVideoCall] Got local media stream: MediaStream {id: '4521a889-9108-4986-832e-8d284a69fa1d', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
GroupVideoCall.tsx:127 [GroupVideoCall] Video tracks: 1
GroupVideoCall.tsx:128 [GroupVideoCall] Audio tracks: 1
GroupVideoCall.tsx:111 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:112 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:113 [GroupVideoCall] isVideoEnabled: true
GroupVideoCall.tsx:114 [GroupVideoCall] localStream: MediaStream {id: '4521a889-9108-4986-832e-8d284a69fa1d', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
GroupVideoCall.tsx:160 [GroupVideoCall] Processing participants from activeCall: 0
GroupVideoCall.tsx:171 [GroupVideoCall] Unique participants created: 0
GroupVideoCall.tsx:111 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:112 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:113 [GroupVideoCall] isVideoEnabled: true
GroupVideoCall.tsx:114 [GroupVideoCall] localStream: MediaStream {id: '4521a889-9108-4986-832e-8d284a69fa1d', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
CallContext.tsx:420 [CallContext] Received message: {type: 'group_call_participants_update', payload: {…}}
CallContext.tsx:1014 [CallContext] Group call participants update: {type: 'group_call_participants_update', payload: {…}}
CallContext.tsx:1019 [CallContext] Comparing callIds - message: group_call_1749105382250_37_5 activeCall: group_call_1749105382250_37_5
CallContext.tsx:1020 [CallContext] ActiveCall groupId: 37
CallContext.tsx:1059 [CallContext] Extracted groupIds - message: 37 active: 37
CallContext.tsx:1060 [CallContext] CallId parts: (5) ['group', 'call', '1749105382250', '37', '5']
CallContext.tsx:1063 [CallContext] Group IDs match, updating participants: (2) [5, 2]
CallContext.tsx:1067 [CallContext] Unique participants after deduplication: (2) [5, 2]
CallContext.tsx:1085 [CallContext] Updated participants in active call: (2) [5, 2]
GroupVideoCall.tsx:111 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:112 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:113 [GroupVideoCall] isVideoEnabled: true
GroupVideoCall.tsx:114 [GroupVideoCall] localStream: MediaStream {id: '4521a889-9108-4986-832e-8d284a69fa1d', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
GroupVideoCall.tsx:160 [GroupVideoCall] Processing participants from activeCall: 2
GroupVideoCall.tsx:171 [GroupVideoCall] Unique participants created: 2
GroupVideoCall.tsx:111 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:112 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:113 [GroupVideoCall] isVideoEnabled: true
GroupVideoCall.tsx:114 [GroupVideoCall] localStream: MediaStream {id: '4521a889-9108-4986-832e-8d284a69fa1d', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
GroupVideoCall.tsx:190 [GroupVideoCall] Setting up WebRTC connections sequentially
GroupVideoCall.tsx:217 [GroupVideoCall] Processing connection for user: 5
GroupVideoCall.tsx:221 [GroupVideoCall] Creating peer connection for user: 5
GroupVideoCall.tsx:239 [GroupVideoCall] Adding local track to peer connection: audio
GroupVideoCall.tsx:239 [GroupVideoCall] Adding local track to peer connection: video
GroupVideoCall.tsx:338 [GroupVideoCall] Sent WebRTC offer to user: 5
GroupVideoCall.tsx:140 [GroupVideoCall] Local video element configured
GroupVideoCall.tsx:111 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:112 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:113 [GroupVideoCall] isVideoEnabled: true
GroupVideoCall.tsx:114 [GroupVideoCall] localStream: MediaStream {id: '4521a889-9108-4986-832e-8d284a69fa1d', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
CallContext.tsx:380 [CallContext] Creating stable WebSocket for calls...
CallContext.tsx:490 [CallContext] WebSocket disconnected
GroupVideoCall.tsx:111 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:112 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:113 [GroupVideoCall] isVideoEnabled: true
GroupVideoCall.tsx:114 [GroupVideoCall] localStream: MediaStream {id: '4521a889-9108-4986-832e-8d284a69fa1d', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
CallContext.tsx:387 [CallContext] WebSocket connected successfully for calls
CallContext.tsx:401 [CallContext] Authenticated user 2 with WebSocket
GroupVideoCall.tsx:111 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:112 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:113 [GroupVideoCall] isVideoEnabled: true
GroupVideoCall.tsx:114 [GroupVideoCall] localStream: MediaStream {id: '4521a889-9108-4986-832e-8d284a69fa1d', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
CallContext.tsx:420 [CallContext] Received message: {type: 'user_status', payload: {…}}
GroupVideoCall.tsx:111 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:112 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:113 [GroupVideoCall] isVideoEnabled: true
GroupVideoCall.tsx:114 [GroupVideoCall] localStream: MediaStream {id: '4521a889-9108-4986-832e-8d284a69fa1d', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
CallContext.tsx:380 [CallContext] Creating stable WebSocket for calls...
CallContext.tsx:490 [CallContext] WebSocket disconnected
GroupVideoCall.tsx:111 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:112 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:113 [GroupVideoCall] isVideoEnabled: true
GroupVideoCall.tsx:114 [GroupVideoCall] localStream: MediaStream {id: '4521a889-9108-4986-832e-8d284a69fa1d', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
CallContext.tsx:387 [CallContext] WebSocket connected successfully for calls
CallContext.tsx:401 [CallContext] Authenticated user 2 with WebSocket
GroupVideoCall.tsx:111 [GroupVideoCall] Component rendering with activeCall: {callId: 'group_call_1749105382250_37_5', callType: 'video', status: 'connected', isIncoming: false, localStream: MediaStream, …}
GroupVideoCall.tsx:112 [GroupVideoCall] user?.id: 2
GroupVideoCall.tsx:113 [GroupVideoCall] isVideoEnabled: true
GroupVideoCall.tsx:114 [GroupVideoCall] localStream: MediaStream {id: '4521a889-9108-4986-832e-8d284a69fa1d', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}
CallContext.tsx:420 [CallContext] Received message: {type: 'user_status', payload: {…}}